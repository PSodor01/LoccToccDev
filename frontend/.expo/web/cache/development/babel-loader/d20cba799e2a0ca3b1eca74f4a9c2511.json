{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\pauls\\\\Documents\\\\LoccToccDev\\\\frontend\\\\components\\\\main\\\\NewPost.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { MaterialCommunityIcons, MaterialIcons } from \"@expo/vector-icons\";\nimport FontAwesome5 from \"@expo/vector-icons/FontAwesome5\";\nimport { useNavigation } from '@react-navigation/native';\nimport * as ImagePicker from 'expo-image-picker';\nimport Animated from 'react-native-reanimated';\nimport BottomSheet from 'reanimated-bottom-sheet';\nimport Constants from 'expo-constants';\nimport * as Analytics from 'expo-firebase-analytics';\nimport firebase from 'firebase';\n\nrequire(\"firebase/firestore\");\n\nrequire(\"firebase/firebase-storage\");\n\nimport { connect } from 'react-redux';\n\nfunction AddPostScreen(props) {\n  var _this = this;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      transferred = _useState6[0],\n      setTransferred = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      post = _useState8[0],\n      setPost = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      userData = _useState10[0],\n      setUserData = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      gifs = _useState12[0],\n      setGifs = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      term = _useState14[0],\n      updateTerm = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      userTagList = _useState16[0],\n      setUserTagList = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      userTokenList = _useState18[0],\n      setUserTokenList = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      isUserTagged = _useState20[0],\n      setIsUserTagged = _useState20[1];\n\n  var _useState21 = useState(null),\n      _useState22 = _slicedToArray(_useState21, 2),\n      gifMode = _useState22[0],\n      setGifMode = _useState22[1];\n\n  var _useState23 = useState([]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      allUsers = _useState24[0],\n      setAllUsers = _useState24[1];\n\n  var _useState25 = useState(''),\n      _useState26 = _slicedToArray(_useState25, 2),\n      search = _useState26[0],\n      setSearch = _useState26[1];\n\n  var _props$route$params = props.route.params,\n      gameId = _props$route$params.gameId,\n      homeTeam = _props$route$params.homeTeam,\n      awayTeam = _props$route$params.awayTeam,\n      gameDate = _props$route$params.gameDate;\n\n  var getUser = function getUser() {\n    var currentUser;\n    return _regeneratorRuntime.async(function getUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(firebase.firestore().collection('users').doc(firebase.auth().currentUser.uid).get().then(function (documentSnapshot) {\n              if (documentSnapshot.exists) {\n                setUserData(documentSnapshot.data());\n              }\n            }));\n\n          case 2:\n            currentUser = _context.sent;\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getUser();\n    analytics().logevent('screen_view', {\n      screen_name: 'NewPost',\n      user_name: props.currentUser.name\n    });\n  }, []);\n  useEffect(function () {\n    setAllUsers(props.allUsers);\n  }, [props.allUsers]);\n\n  var takePhotoFromCamera = function takePhotoFromCamera() {\n    ImagePicker.openCamera({\n      width: 1200,\n      height: 780,\n      cropping: true\n    }).then(function (image) {\n      console.log(image);\n      var imageUri = Platform.OS === 'ios' ? image.sourceURL : image.path;\n      setImage(imageUri);\n    });\n  };\n\n  var pickImage = function pickImage() {\n    var result;\n    return _regeneratorRuntime.async(function pickImage$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            analytics().logevent('addPictureToPost', {\n              user_name: props.currentUser.name\n            });\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Images,\n              allowsEditing: true,\n              aspect: [1, 1],\n              quality: 1\n            }));\n\n          case 3:\n            result = _context2.sent;\n            console.log(result);\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n            }\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var pickGif = function pickGif(url) {\n    analytics().logevent('addGifToPost', {\n      user_name: props.currentUser.name\n    });\n    var result = url;\n    console.log(result);\n\n    if (!result.cancelled) {\n      setImage(result);\n\n      _this.bs.current.snapTo(1);\n    }\n  };\n\n  var removeImage = function removeImage() {\n    analytics().logevent('removeImageFromPost', {\n      user_name: props.currentUser.name\n    });\n    setImage(null);\n  };\n\n  var removeTaggedUser = function removeTaggedUser() {\n    analytics().logevent('removeTaggedUserFromPost', {\n      user_name: props.currentUser.name\n    });\n    setUserTagList(null);\n    setUserTokenList(null);\n    setIsUserTagged([null]);\n  };\n\n  var setGifFunction = function setGifFunction() {\n    setGifMode(true);\n  };\n\n  var setTagFunction = function setTagFunction() {\n    setGifMode(false);\n  };\n\n  var tagUsersFunction = function tagUsersFunction(name, token) {\n    analytics().logevent('addUsersToTagList', {\n      user_name: props.currentUser.name\n    });\n    var userTagList = name;\n    setUserTagList(userTagList);\n    setUserTokenList(token);\n    setIsUserTagged(true);\n  };\n\n  var sendNotificationForTag = function sendNotificationForTag() {\n    var taggerName, name, token, notification, _notification;\n\n    return _regeneratorRuntime.async(function sendNotificationForTag$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (userTokenList) {\n              taggerName = props.currentUser.name;\n              name = userTagList;\n              token = userTokenList;\n\n              if (awayTeam != undefined) {\n                notification = '(' + name + '): ' + taggerName + ' tagged you in a post on the ' + awayTeam + \"/\" + homeTeam + \" game\";\n                sendNotification(notification, token);\n                console.log(token);\n              } else {\n                _notification = '(' + name + '): ' + taggerName + ' tagged you in a post';\n                sendNotification(_notification, token);\n              }\n            }\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var sendNotification = function sendNotification(notification, token) {\n    var message;\n    return _regeneratorRuntime.async(function sendNotification$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            message = {\n              to: token,\n              sound: 'default',\n              body: notification ? notification : '',\n              badge: 1\n            };\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(fetch('https://exp.host/--/api/v2/push/send', {\n              method: 'POST',\n              headers: {\n                Accept: 'application/json',\n                'Accept-encoding': 'gzip, deflate',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(message)\n            }));\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var savePostData = function savePostData(downloadURL) {\n    analytics().logevent('newPost', {\n      user_name: props.currentUser.name\n    });\n    firebase.firestore().collection('posts').doc(firebase.auth().currentUser.uid).collection(\"userPosts\").add({\n      caption: post,\n      gameId: gameId,\n      creation: firebase.firestore.FieldValue.serverTimestamp(),\n      creator: firebase.auth().currentUser.uid,\n      likesCount: 0,\n      fadesCount: 0,\n      comments: 0,\n      downloadURL: downloadURL,\n      userTagList: userTagList\n    }).then(function () {\n      console.log('Post Added!');\n      Alert.alert(\"Let's go!\", 'Your post has been published successfully!');\n      setPost(null);\n      setLoading(false);\n    }).then(function () {\n      navigation.goBack();\n    }).catch(function (error) {\n      console.log(error);\n      firebase.firestore().collection(\"users\").doc(firebase.auth().currentUser.uid).update({\n        postsCount: firebase.firestore.FieldValue.increment(1)\n      });\n    });\n  };\n\n  var increasePostsCount = function increasePostsCount() {\n    firebase.firestore().collection(\"votes\").doc(gameId).collection(\"gameVotes\").doc(\"info\").get().then(function (snapshot) {\n      if (snapshot.exists) {\n        firebase.firestore().collection(\"votes\").doc(gameId).collection(\"gameVotes\").doc('info').update({\n          gamePostsCount: firebase.firestore.FieldValue.increment(1)\n        });\n      } else {\n        var gameVotes = firebase.firestore().collection(\"votes\").doc(gameId).collection(\"gameVotes\").doc('info');\n        gameVotes.set({\n          gameDate: gameDate,\n          awayCount: 0,\n          homeCount: 0,\n          drawCount: 0,\n          gamePostsCount: 1\n        });\n      }\n    });\n  };\n\n  var uploadImage = function uploadImage() {\n    var downloadURL, uri, childPath, response, blob, task, taskProgress, taskCompleted, taskError;\n    return _regeneratorRuntime.async(function uploadImage$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            if (!(image == null)) {\n              _context5.next = 5;\n              break;\n            }\n\n            downloadURL = \"blank\";\n            savePostData(downloadURL);\n            _context5.next = 20;\n            break;\n\n          case 5:\n            setLoading(true);\n            uri = image;\n            childPath = \"post/\" + firebase.auth().currentUser.uid + \"/\" + Math.random().toString(36);\n            console.log(childPath);\n            _context5.next = 11;\n            return _regeneratorRuntime.awrap(fetch(uri));\n\n          case 11:\n            response = _context5.sent;\n            _context5.next = 14;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 14:\n            blob = _context5.sent;\n            task = firebase.storage().ref().child(childPath).put(blob);\n\n            taskProgress = function taskProgress(snapshot) {\n              console.log(\"transferred: \" + snapshot.bytesTransferred);\n            };\n\n            taskCompleted = function taskCompleted() {\n              task.snapshot.ref.getDownloadURL().then(function (snapshot) {\n                savePostData(snapshot);\n                console.log(snapshot);\n              });\n            };\n\n            taskError = function taskError(snapshot) {\n              console.log(snapshot);\n            };\n\n            task.on(\"state_changed\", taskProgress, taskError, taskCompleted);\n\n          case 20:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var testID = 'ca-app-pub-3940256099942544/2934735716';\n  var productionID = 'ca-app-pub-8519029912093094/5346208751';\n  var adUnitID = Constants.isDevice && !__DEV__ ? productionID : testID;\n  var navigation = useNavigation();\n\n  function fetchGifs() {\n    var API_KEY, BASE_URL, resJson, res;\n    return _regeneratorRuntime.async(function fetchGifs$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            API_KEY = '17HE4ZOjp4kGtW49q3cnlJzkvDNZBJzh';\n            BASE_URL = 'http://api.giphy.com/v1/gifs/search';\n            _context6.next = 5;\n            return _regeneratorRuntime.awrap(fetch(BASE_URL + \"?api_key=\" + API_KEY + \"&q=\" + term));\n\n          case 5:\n            resJson = _context6.sent;\n            _context6.next = 8;\n            return _regeneratorRuntime.awrap(resJson.json());\n\n          case 8:\n            res = _context6.sent;\n            setGifs(res.data);\n            _context6.next = 15;\n            break;\n\n          case 12:\n            _context6.prev = 12;\n            _context6.t0 = _context6[\"catch\"](0);\n            console.warn(_context6.t0);\n\n          case 15:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, [[0, 12]], Promise);\n  }\n\n  function onEdit(newTerm) {\n    updateTerm(newTerm);\n    fetchGifs();\n  }\n\n  renderGifInner = function renderGifInner() {\n    return React.createElement(View, {\n      style: styles.panel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }\n    }, React.createElement(FlatList, {\n      data: gifs,\n      renderItem: function renderItem(_ref) {\n        var item = _ref.item;\n        return React.createElement(View, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 21\n          }\n        }, React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            pickGif(item.images.original.url);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 25\n          }\n        }, React.createElement(Image, {\n          style: styles.image,\n          source: {\n            uri: item.images.original.url\n          },\n          numColumns: 1,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 29\n          }\n        })));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 13\n      }\n    }), React.createElement(TouchableOpacity, {\n      style: styles.panelButton,\n      onPress: function onPress() {\n        return _this.bs.current.snapTo(1);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: styles.panelButtonTitle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 13\n      }\n    }, \"Cancel\")));\n  };\n\n  renderGifHeader = function renderGifHeader() {\n    return React.createElement(View, {\n      style: styles.header,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }\n    }, React.createElement(View, {\n      style: styles.panelHeader,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 11\n      }\n    }, React.createElement(View, {\n      style: styles.panelHandle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 13\n      }\n    }), React.createElement(View, {\n      style: styles.searchSection,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 13\n      }\n    }, React.createElement(FontAwesome5, {\n      name: \"search-dollar\",\n      color: \"grey\",\n      size: 20,\n      paddingRight: 5,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 17\n      }\n    }), React.createElement(TextInput, {\n      placeholder: \"Search GIPHY\",\n      style: styles.textInput,\n      clearButtonMode: 'while-editing',\n      onChangeText: function onChangeText(text) {\n        return onEdit(text);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 17\n      }\n    }))));\n  };\n\n  renderTagInner = function renderTagInner() {\n    return React.createElement(View, {\n      style: styles.panel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }\n    }, React.createElement(FlatList, {\n      data: allUsers.sort(function (a, b) {\n        return a.name.localeCompare(b.name);\n      }),\n      keyExtractor: function keyExtractor(item, index) {\n        return index.toString();\n      },\n      renderItem: searchItemView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 13\n      }\n    }), React.createElement(TouchableOpacity, {\n      style: styles.panelButton,\n      onPress: function onPress() {\n        return _this.bs.current.snapTo(1);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: styles.panelButtonTitle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 13\n      }\n    }, \"Cancel\")));\n  };\n\n  renderTagHeader = function renderTagHeader() {\n    return React.createElement(View, {\n      style: styles.header,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }\n    }, React.createElement(View, {\n      style: styles.panelHeader,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }\n    }, React.createElement(View, {\n      style: styles.panelHandle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 13\n      }\n    }), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 13\n      }\n    }, \"Choose a friend below to tag in your post!\"), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 13\n      }\n    }, \" \"), React.createElement(View, {\n      style: styles.searchSection,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 13\n      }\n    }, React.createElement(FontAwesome5, {\n      name: \"search-dollar\",\n      color: \"grey\",\n      size: 20,\n      paddingRight: 5,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 17\n      }\n    }), React.createElement(TextInput, {\n      style: styles.textInput,\n      placeholder: \"Type to find friends...\",\n      clearButtonMode: 'while-editing',\n      value: search,\n      onChangeText: function onChangeText(text) {\n        return searchFilter(text);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 17\n      }\n    }))));\n  };\n\n  var searchItemView = function searchItemView(_ref2) {\n    var item = _ref2.item;\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 11\n      }\n    }, item.id == 'L3PlC2PXHYMYHsrdUtaS6tr7Ij13' || item.id == '74hAr9c5tYcERhqgyVbcwrPEr083' ? null : React.createElement(View, {\n      style: styles.feedItem,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 15\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: styles.postLeftContainer,\n      onPress: function onPress() {\n        tagUsersFunction(item.name, item.token);\n\n        _this.bs.current.snapTo(1);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 19\n      }\n    }, React.createElement(Image, {\n      style: styles.profilePhotoPostContainer,\n      source: {\n        uri: item.name ? item.userImg : 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 23\n      }\n    }), React.createElement(Text, {\n      style: styles.searchResultsText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 23\n      }\n    }, item.name))));\n  };\n\n  var searchFilter = function searchFilter(text) {\n    if (text) {\n      var newData = allUsers.filter(function (item) {\n        var itemData = item.name ? item.name.toUpperCase() : ''.toUpperCase();\n        var textData = text.toUpperCase();\n        return itemData.indexOf(textData) > -1;\n      });\n      setAllUsers(newData);\n      setSearch(text);\n    } else {\n      setAllUsers(props.allUsers);\n      setSearch(text);\n    }\n  };\n\n  bs = React.createRef();\n  fall = new Animated.Value(1);\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 9\n    }\n  }, gifMode == true ? React.createElement(BottomSheet, {\n    ref: this.bs,\n    snapPoints: [550, -5],\n    renderContent: this.renderGifInner,\n    renderHeader: this.renderGifHeader,\n    initialSnap: 1,\n    callbackNode: this.fall,\n    enabledGestureInteraction: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 11\n    }\n  }) : React.createElement(BottomSheet, {\n    ref: this.bs,\n    snapPoints: [550, -5],\n    renderContent: this.renderTagInner,\n    renderHeader: this.renderTagHeader,\n    initialSnap: 1,\n    callbackNode: this.fall,\n    enabledGestureInteraction: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 11\n    }\n  }), React.createElement(Animated.View, {\n    style: {\n      margin: 10,\n      opacity: Animated.add(0.1, Animated.multiply(this.fall, 1.0))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 11\n    }\n  }, awayTeam ? React.createElement(Text, {\n    style: styles.gameText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 25\n    }\n  }, awayTeam, \" vs \", homeTeam) : null, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.typePostContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 15\n    }\n  }, React.createElement(Image, {\n    style: styles.profilePhotoPostContainer,\n    source: {\n      uri: userData ? userData.userImg : 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 17\n    }\n  }), React.createElement(TextInput, {\n    placeholder: \"Know your stuff? Share your lock...\",\n    style: styles.postTextInput,\n    numberOfLines: 4,\n    multiline: true,\n    maxLength: 1000,\n    value: post,\n    onChangeText: function onChangeText(content) {\n      return setPost(content);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 17\n    }\n  })), isUserTagged == true ? React.createElement(View, {\n    style: styles.tagListContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 17\n    }\n  }, \"Tagged friends: \"), React.createElement(Text, {\n    style: {\n      color: '#0033cc',\n      fontWeight: 'bold'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 17\n    }\n  }, \"@\", userTagList), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      removeTaggedUser();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 17\n    }\n  }, React.createElement(Feather, {\n    name: \"x-circle\",\n    size: 16,\n    color: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 21\n    }\n  }))) : null), React.createElement(View, {\n    style: styles.addCommentButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.galleryContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 17\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      _this.bs.current.snapTo(0);\n\n      setGifFunction();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 19\n    }\n  }, React.createElement(MaterialIcons, {\n    name: \"gif\",\n    size: 28,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: \"#86898B\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 23\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      pickImage();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 19\n    }\n  }, React.createElement(MaterialCommunityIcons, {\n    name: \"camera\",\n    size: 24,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: \"#86898B\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 23\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      _this.bs.current.snapTo(0);\n\n      setTagFunction();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 19\n    }\n  }, React.createElement(FontAwesome5, {\n    name: \"user-tag\",\n    size: 24,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: \"#86898B\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 23\n    }\n  }))), React.createElement(View, {\n    style: styles.postButtonContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 17\n    }\n  }, image == null && post == null ? React.createElement(View, {\n    style: styles.postButtonGreyed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: styles.shareText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 23\n    }\n  }, \"POST\")) : React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      uploadImage();\n      increasePostsCount();\n      sendNotificationForTag();\n    },\n    style: styles.postButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: styles.shareText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 23\n    }\n  }, \"POST\")))), loading ? React.createElement(View, {\n    style: styles.StatusWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 17\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 19\n    }\n  })) : React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 17\n    }\n  }), React.createElement(View, {\n    style: styles.xButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 13\n    }\n  }, image != null ? React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      removeImage();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 19\n    }\n  }, React.createElement(Feather, {\n    name: \"x-circle\",\n    size: 24,\n    color: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 21\n    }\n  })) : null), React.createElement(View, {\n    style: styles.InputWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 13\n    }\n  }, image != null ? React.createElement(Image, {\n    source: {\n      uri: image\n    },\n    style: styles.AddImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 32\n    }\n  }) : null)));\n}\n\n;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  },\n  typePostContainer: {\n    flexDirection: 'row',\n    margin: \"2%\"\n  },\n  InputWrapper: {\n    width: \"100%\",\n    alignItems: 'center'\n  },\n  AddImage: {\n    width: \"80%\",\n    height: \"70%\",\n    marginTop: \"5%\",\n    alignItems: 'center'\n  },\n  StatusWrapper: {\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  profilePhotoPostContainer: {\n    backgroundColor: \"#e1e2e6\",\n    width: 50,\n    height: 50,\n    borderRadius: 40,\n    marginRight: \"2%\"\n  },\n  profilePhotoPostContainer: {\n    backgroundColor: \"#e1e2e6\",\n    width: 40,\n    height: 40,\n    borderRadius: 40,\n    marginRight: \"2%\"\n  },\n  shareText: {\n    fontSize: 16,\n    fontWeight: \"bold\",\n    color: \"#fff\",\n    alignSelf: 'center'\n  },\n  gameText: {\n    fontWeight: 'bold',\n    marginLeft: \"2%\",\n    color: \"grey\"\n  },\n  addCommentButton: {\n    flexDirection: 'row',\n    borderBottomColor: \"#CACFD2\",\n    borderBottomWidth: 1,\n    borderTopColor: \"#CACFD2\",\n    borderTopWidth: 1,\n    justifyContent: 'space-between',\n    paddingLeft: 40,\n    paddingRight: 10,\n    paddingVertical: 8\n  },\n  galleryContainer: {\n    flexDirection: 'row',\n    marginLeft: \"5%\",\n    flex: 1,\n    justifyContent: 'space-between',\n    marginRight: \"25%\"\n  },\n  postButtonContainer: {\n    paddingRight: \"10%\"\n  },\n  postButton: {\n    alignSelf: 'center',\n    backgroundColor: '#33A8FF',\n    borderRadius: 6,\n    alignSelf: 'center',\n    paddingVertical: 3,\n    paddingHorizontal: 8\n  },\n  postButtonGreyed: {\n    alignSelf: 'center',\n    backgroundColor: '#CACFD2',\n    borderRadius: 6,\n    alignSelf: 'center',\n    paddingVertical: 3,\n    paddingHorizontal: 8\n  },\n  textInput: {\n    height: 30,\n    width: \"75%\",\n    paddingHorizontal: 20,\n    backgroundColor: \"#ffffff\",\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: \"#e5e7e9\"\n  },\n  panel: {\n    padding: 20,\n    backgroundColor: '#FFFFFF',\n    paddingTop: 20,\n    width: '100%',\n    alignItems: 'center'\n  },\n  header: {\n    backgroundColor: '#FFFFFF',\n    shadowColor: '#333333',\n    shadowOffset: {\n      width: -1,\n      height: -3\n    },\n    shadowRadius: 2,\n    shadowOpacity: 0.4,\n    paddingTop: 20,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20\n  },\n  panelHeader: {\n    alignItems: 'center'\n  },\n  panelHandle: {\n    width: 40,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#00000040',\n    marginBottom: 10\n  },\n  panelTitle: {\n    fontSize: 27,\n    height: 35\n  },\n  panelSubtitle: {\n    fontSize: 14,\n    color: 'gray',\n    height: 30,\n    marginBottom: 10\n  },\n  panelButton: {\n    padding: 13,\n    borderRadius: 10,\n    backgroundColor: '#2e64e5',\n    alignItems: 'center',\n    marginVertical: 7\n  },\n  panelButtonTitle: {\n    fontSize: 17,\n    fontWeight: 'bold',\n    color: 'white'\n  },\n  image: {\n    width: 300,\n    height: 150,\n    marginBottom: 5,\n    borderRadius: 10\n  },\n  searchSection: {\n    flex: 1,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  xButton: {\n    alignItems: 'flex-end',\n    paddingTop: 2\n  },\n  postTextInput: {\n    width: Dimensions.get('window').width * .80\n  },\n  feedItem: {\n    padding: 6,\n    marginVertical: 2,\n    marginHorizontal: 5,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#e1e2e6\",\n    flexDirection: 'row'\n  },\n  postLeftContainer: {\n    flexDirection: \"row\"\n  },\n  tagListContainer: {\n    flexDirection: \"row\"\n  },\n  searchResultsText: {\n    padding: 5,\n    alignSelf: 'center',\n    marginLeft: \"5%\"\n  },\n  adView: {\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    allUsers: store.userState.allUsers,\n    currentUser: store.userState.currentUser\n  };\n};\n\nexport default connect(mapStateToProps)(AddPostScreen);","map":{"version":3,"names":["React","useState","useEffect","Feather","MaterialCommunityIcons","MaterialIcons","FontAwesome5","useNavigation","ImagePicker","Animated","BottomSheet","Constants","Analytics","firebase","require","connect","AddPostScreen","props","image","setImage","loading","setLoading","transferred","setTransferred","post","setPost","userData","setUserData","gifs","setGifs","term","updateTerm","userTagList","setUserTagList","userTokenList","setUserTokenList","isUserTagged","setIsUserTagged","gifMode","setGifMode","allUsers","setAllUsers","search","setSearch","route","params","gameId","homeTeam","awayTeam","gameDate","getUser","firestore","collection","doc","auth","currentUser","uid","get","then","documentSnapshot","exists","data","logEvent","screen_name","user_name","name","takePhotoFromCamera","openCamera","width","height","cropping","console","log","imageUri","Platform","OS","sourceURL","path","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","result","cancelled","uri","pickGif","url","bs","current","snapTo","removeImage","removeTaggedUser","setGifFunction","setTagFunction","tagUsersFunction","token","sendNotificationForTag","taggerName","undefined","notification","sendNotification","message","to","sound","body","badge","fetch","method","headers","Accept","JSON","stringify","savePostData","downloadURL","add","caption","creation","FieldValue","serverTimestamp","creator","likesCount","fadesCount","comments","Alert","alert","navigation","goBack","catch","error","update","postsCount","increment","increasePostsCount","snapshot","gamePostsCount","gameVotes","set","awayCount","homeCount","drawCount","uploadImage","childPath","Math","random","toString","response","blob","task","storage","ref","child","put","taskProgress","bytesTransferred","taskCompleted","getDownloadURL","taskError","on","testID","productionID","adUnitID","isDevice","__DEV__","fetchGifs","API_KEY","BASE_URL","resJson","json","res","warn","onEdit","newTerm","renderGifInner","styles","panel","item","images","original","panelButton","panelButtonTitle","renderGifHeader","header","panelHeader","panelHandle","searchSection","textInput","text","renderTagInner","sort","a","b","localeCompare","index","searchItemView","renderTagHeader","searchFilter","id","feedItem","postLeftContainer","profilePhotoPostContainer","userImg","searchResultsText","newData","filter","itemData","toUpperCase","textData","indexOf","createRef","fall","Value","container","margin","opacity","multiply","gameText","typePostContainer","postTextInput","content","tagListContainer","fontWeight","color","addCommentButton","galleryContainer","postButtonContainer","postButtonGreyed","shareText","postButton","StatusWrapper","xButton","InputWrapper","AddImage","StyleSheet","create","flex","backgroundColor","flexDirection","alignItems","marginTop","justifyContent","borderRadius","marginRight","fontSize","alignSelf","marginLeft","borderBottomColor","borderBottomWidth","borderTopColor","borderTopWidth","paddingLeft","paddingRight","paddingVertical","paddingHorizontal","borderWidth","borderColor","padding","paddingTop","shadowColor","shadowOffset","shadowRadius","shadowOpacity","borderTopLeftRadius","borderTopRightRadius","marginBottom","panelTitle","panelSubtitle","marginVertical","Dimensions","marginHorizontal","adView","mapStateToProps","store","userState"],"sources":["C:/Users/pauls/Documents/LoccToccDev/frontend/components/main/NewPost.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, Platform, Alert, FlatList, StyleSheet, Dimensions, ActivityIndicator, TextInput, TouchableOpacity, Image, TouchableWithoutFeedback, Keyboard, KeyboardAvoidingView} from 'react-native';\r\n\r\nimport { Feather } from \"@expo/vector-icons\";\r\nimport { MaterialCommunityIcons, MaterialIcons } from \"@expo/vector-icons\";\r\nimport FontAwesome5 from 'react-native-vector-icons/FontAwesome5'\r\n\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nimport * as ImagePicker from 'expo-image-picker';\r\n\r\nimport Animated from 'react-native-reanimated';\r\nimport BottomSheet from 'reanimated-bottom-sheet';\r\n\r\nimport Constants from 'expo-constants'\r\nimport * as Analytics from 'expo-firebase-analytics';\r\n\r\nimport firebase from 'firebase'\r\nrequire(\"firebase/firestore\")\r\nrequire(\"firebase/firebase-storage\")\r\nimport { connect } from 'react-redux'\r\n\r\nfunction AddPostScreen(props) {\r\n\r\n  const [image, setImage] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [transferred, setTransferred] = useState(0);\r\n  const [post, setPost] = useState(null);\r\n  const [userData, setUserData] = useState(null);\r\n  const [gifs, setGifs] = useState([]);\r\n  const [term, updateTerm] = useState('');\r\n  const [userTagList, setUserTagList] = useState(null);\r\n  const [userTokenList, setUserTokenList] = useState(null);\r\n  const [isUserTagged, setIsUserTagged] = useState(false)\r\n  const [gifMode, setGifMode] = useState(null);\r\n  const [allUsers, setAllUsers] = useState([]);\r\n  const [search, setSearch] = useState('');\r\n\r\n  const { gameId, homeTeam, awayTeam, gameDate } = props.route.params;\r\n\r\n  const getUser = async() => {\r\n    const currentUser = await firebase.firestore()\r\n      .collection('users')\r\n      .doc(firebase.auth().currentUser.uid)\r\n      .get()\r\n      .then((documentSnapshot) => {\r\n        if( documentSnapshot.exists ) {\r\n            setUserData(documentSnapshot.data());\r\n        }\r\n      })\r\n    }  \r\n\r\n    useEffect(() => {\r\n      getUser();\r\n      analytics().logevent('screen_view', { screen_name: 'NewPost', user_name: props.currentUser.name })\r\n    },[]);\r\n\r\n    useEffect(() => {\r\n        \r\n      setAllUsers(props.allUsers)\r\n      \r\n  }, [props.allUsers])\r\n\r\n  const takePhotoFromCamera = () => {\r\n    ImagePicker.openCamera({\r\n      width: 1200,\r\n      height: 780,\r\n      cropping: true,\r\n    }).then((image) => {\r\n      console.log(image);\r\n      const imageUri = Platform.OS === 'ios' ? image.sourceURL : image.path;\r\n      setImage(imageUri);\r\n    });\r\n  };\r\n\r\n  const pickImage = async () => {\r\n\r\n    analytics().logevent('addPictureToPost', {user_name: props.currentUser.name});\r\n\r\n    let result = await ImagePicker.launchImageLibraryAsync({\r\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n      allowsEditing: true,\r\n      aspect: [1, 1],\r\n      quality: 1,\r\n    });\r\n    console.log(result);\r\n\r\n    if (!result.cancelled) {\r\n      setImage(result.uri);\r\n    }\r\n  };\r\n\r\n  const pickGif = (url) => {\r\n\r\n    analytics().logevent('addGifToPost', {user_name: props.currentUser.name});\r\n\r\n    let result =  (url);\r\n    console.log(result);\r\n\r\n    if (!result.cancelled) {\r\n      setImage(result);\r\n      this.bs.current.snapTo(1);\r\n    }\r\n  };\r\n\r\n  const removeImage = () => {\r\n    analytics().logevent('removeImageFromPost', {user_name: props.currentUser.name});\r\n\r\n      setImage(null);\r\n  }\r\n\r\n  const removeTaggedUser = () => {\r\n    analytics().logevent('removeTaggedUserFromPost', {user_name: props.currentUser.name});\r\n\r\n    setUserTagList(null);\r\n    setUserTokenList(null);\r\n    setIsUserTagged([null])\r\n  }\r\n\r\n\r\n  const setGifFunction = () => {\r\n    setGifMode(true)\r\n  }\r\n\r\n  const setTagFunction = () => {\r\n    setGifMode(false)\r\n  }\r\n\r\n  const tagUsersFunction = (name, token) => {\r\n    analytics().logevent('addUsersToTagList', {user_name: props.currentUser.name});\r\n    \r\n        const userTagList = name\r\n        setUserTagList(userTagList)\r\n        setUserTokenList(token)\r\n        setIsUserTagged(true)\r\n\r\n  }\r\n\r\n  const sendNotificationForTag = async () => {\r\n    if (userTokenList) {\r\n        const taggerName = props.currentUser.name\r\n        const name = userTagList\r\n        const token = userTokenList\r\n        if (awayTeam  != undefined) {const notification = '(' + name + '): ' + taggerName + ' tagged you in a post on the ' + awayTeam + \"/\" + homeTeam + \" game\"\r\n          sendNotification(notification, token)\r\n          console.log(token)}\r\n          else {const notification = '(' + name + '): ' + taggerName + ' tagged you in a post'\r\n          sendNotification(notification, token)}\r\n        //const users = await firebase.firestore().collection(\"users\").get();\r\n        //users.docs.map((user) => sendNotification(user.data().token))\r\n    }\r\n  }\r\n\r\n  const sendNotification = async (notification, token) => {\r\n    const message = {\r\n        to: token,\r\n        sound: 'default',\r\n        body: notification ? notification : '',\r\n        badge: 1,\r\n    };\r\n    \r\n    await fetch('https://exp.host/--/api/v2/push/send', {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Accept-encoding': 'gzip, deflate',\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(message),\r\n    });\r\n  }\r\n\r\n  const savePostData = (downloadURL) => {\r\n\r\n    analytics().logevent('newPost', {user_name: props.currentUser.name});\r\n\r\n    firebase.firestore()\r\n        .collection('posts')\r\n        .doc(firebase.auth().currentUser.uid)\r\n        .collection(\"userPosts\")\r\n        .add({\r\n          caption: post,\r\n          gameId: gameId,\r\n          creation: firebase.firestore.FieldValue.serverTimestamp(),\r\n          creator: firebase.auth().currentUser.uid,\r\n          likesCount: 0,\r\n          fadesCount: 0,\r\n          comments: 0,\r\n          downloadURL,\r\n          userTagList: userTagList\r\n        }).then(() => {\r\n          console.log('Post Added!');\r\n          Alert.alert(\r\n            \"Let's go!\" ,\r\n            'Your post has been published successfully!',\r\n          );\r\n          setPost(null);\r\n          setLoading(false)\r\n        }).then((function () {\r\n          navigation.goBack()\r\n      })).catch((error) => {\r\n        console.log(error)\r\n        \r\n        firebase.firestore()\r\n        .collection(\"users\")\r\n        .doc(firebase.auth().currentUser.uid)\r\n        .update({\r\n            postsCount: firebase.firestore.FieldValue.increment(1),\r\n        })\r\n    })\r\n\r\n    }\r\n\r\n    const increasePostsCount = () => {\r\n\r\n      firebase.firestore()\r\n          .collection(\"votes\")\r\n          .doc(gameId)\r\n          .collection(\"gameVotes\")\r\n          .doc(\"info\")\r\n          .get()\r\n          .then((snapshot) => {\r\n              if (snapshot.exists) {\r\n                firebase.firestore()\r\n                .collection(\"votes\")\r\n                .doc(gameId)\r\n                .collection(\"gameVotes\")\r\n                .doc('info')\r\n                .update({\r\n                    gamePostsCount: firebase.firestore.FieldValue.increment(1)\r\n                })\r\n\r\n              }\r\n            \r\n              else {\r\n                  \r\n                  const gameVotes = \r\n                      firebase.firestore()\r\n                      .collection(\"votes\")\r\n                      .doc(gameId)\r\n                      .collection(\"gameVotes\")\r\n                      .doc('info')\r\n\r\n                  gameVotes\r\n                      .set({\r\n                        gameDate: gameDate,\r\n                        awayCount: 0,\r\n                        homeCount: 0,\r\n                        drawCount:0,\r\n                        gamePostsCount: 1,\r\n\r\n                      })\r\n                  \r\n              }\r\n          })\r\n  }\r\n\r\n  const uploadImage = async () => {\r\n      if( image == null ) {\r\n        const downloadURL = \"blank\"\r\n        savePostData(downloadURL);\r\n      }  else {\r\n      \r\n      setLoading(true)\r\n      const uri = image;\r\n        const childPath = `post/${firebase.auth().currentUser.uid}/${Math.random().toString(36)}`;\r\n        console.log(childPath)\r\n\r\n        const response = await fetch(uri);\r\n        const blob = await response.blob();\r\n\r\n        const task = firebase\r\n            .storage()\r\n            .ref()\r\n            .child(childPath)\r\n            .put(blob);\r\n\r\n        const taskProgress = snapshot => {\r\n            console.log(`transferred: ${snapshot.bytesTransferred}`)\r\n        }\r\n\r\n        const taskCompleted = () => {\r\n            task.snapshot.ref.getDownloadURL().then((snapshot) => {\r\n                savePostData(snapshot);\r\n                console.log(snapshot)\r\n            })\r\n        }\r\n\r\n        const taskError = snapshot => {\r\n            console.log(snapshot)\r\n        }\r\n\r\n        task.on(\"state_changed\", taskProgress, taskError, taskCompleted);\r\n      }}\r\n\r\n    const testID = 'ca-app-pub-3940256099942544/2934735716';\r\n    const productionID = 'ca-app-pub-8519029912093094/5346208751';\r\n    // Is a real device and running in production.\r\n    const adUnitID = Constants.isDevice && !__DEV__ ? productionID : testID;\r\n\r\n  const navigation = useNavigation();\r\n\r\n  async function fetchGifs() {\r\n  \r\n    try {\r\n        const API_KEY = '17HE4ZOjp4kGtW49q3cnlJzkvDNZBJzh';\r\n        const BASE_URL = 'http://api.giphy.com/v1/gifs/search';\r\n        const resJson = await fetch(`${BASE_URL}?api_key=${API_KEY}&q=${term}`);\r\n        const res = await resJson.json();\r\n        setGifs(res.data);\r\n        } catch (error) {\r\n            console.warn(error);\r\n        }\r\n    } /// add facebook fresco\r\n    \r\n    function onEdit(newTerm) {\r\n        updateTerm(newTerm);\r\n        fetchGifs();\r\n    }\r\n\r\n    renderGifInner = () => (\r\n        <View style={styles.panel}>\r\n            <FlatList\r\n                data={gifs}\r\n                renderItem={({item}) => ( \r\n                    <View>\r\n                        <TouchableOpacity onPress={()=>{pickGif(item.images.original.url)}}>\r\n                            <Image\r\n                            style={styles.image}\r\n                            source={{uri: item.images.original.url}}\r\n                            numColumns={1}\r\n                            />\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                      \r\n                )}\r\n            />\r\n          <TouchableOpacity\r\n            style={styles.panelButton}\r\n            onPress={() => this.bs.current.snapTo(1)}>\r\n            <Text style={styles.panelButtonTitle}>Cancel</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      );\r\n    \r\n      renderGifHeader = () => (\r\n        <View style={styles.header}>\r\n          <View style={styles.panelHeader}>\r\n            <View style={styles.panelHandle} />\r\n            <View style={styles.searchSection}>\r\n                <FontAwesome5 name=\"search-dollar\" color=\"grey\" size={20} paddingRight={5} />\r\n                <TextInput\r\n                    placeholder=\"Search GIPHY\"\r\n                    style={styles.textInput}\r\n                    clearButtonMode={'while-editing'}\r\n                    onChangeText={(text) => onEdit(text)}\r\n                />\r\n            </View>\r\n          </View>\r\n        </View>\r\n      );\r\n\r\n      renderTagInner = () => (\r\n        <View style={styles.panel}>\r\n            <FlatList\r\n                data = {allUsers.sort((a, b) => a.name.localeCompare(b.name))}\r\n                keyExtractor={(item, index) => index.toString()}\r\n                renderItem={searchItemView}\r\n                    \r\n            />\r\n          <TouchableOpacity\r\n            style={styles.panelButton}\r\n            onPress={() => this.bs.current.snapTo(1)}>\r\n            <Text style={styles.panelButtonTitle}>Cancel</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      );\r\n    \r\n      renderTagHeader = () => (\r\n        <View style={styles.header}>\r\n          <View style={styles.panelHeader}>\r\n            <View style={styles.panelHandle} />\r\n            <Text>Choose a friend below to tag in your post!</Text>\r\n            <Text> </Text>\r\n            <View style={styles.searchSection}>\r\n                <FontAwesome5 name=\"search-dollar\" color=\"grey\" size={20} paddingRight={5} />\r\n                <TextInput\r\n                    style={styles.textInput}\r\n                    placeholder=\"Type to find friends...\"\r\n                    clearButtonMode={'while-editing'}\r\n                    value={search}\r\n                    onChangeText={(text) => searchFilter(text)}\r\n                />\r\n            </View>\r\n          </View>\r\n        </View>\r\n      );\r\n\r\n      const searchItemView = ({item}) => {\r\n        return (\r\n          <View>\r\n          {item.id == 'L3PlC2PXHYMYHsrdUtaS6tr7Ij13' || item.id == '74hAr9c5tYcERhqgyVbcwrPEr083' ?\r\n              null :\r\n\r\n              <View style={styles.feedItem}>\r\n                  <TouchableOpacity style={styles.postLeftContainer}\r\n                      onPress={() => {tagUsersFunction(item.name, item.token); this.bs.current.snapTo(1)}}>\r\n                      <Image \r\n                          style={styles.profilePhotoPostContainer}\r\n                          source={{uri: item.name ? item.userImg : 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7'}}\r\n                      />\r\n                      <Text style={styles.searchResultsText}>{item.name}</Text>\r\n                  </TouchableOpacity>\r\n              </View> }\r\n          </View>\r\n          \r\n      )\r\n    }\r\n\r\n    const searchFilter = (text) => {\r\n        if (text) {\r\n            const newData = allUsers.filter((item) => {\r\n                const itemData = item.name ? item.name.toUpperCase() : ''.toUpperCase();\r\n\r\n                const textData = text.toUpperCase();\r\n                return itemData.indexOf(textData) > -1\r\n\r\n                \r\n            });\r\n            setAllUsers(newData)\r\n            setSearch(text)\r\n        } else {\r\n            setAllUsers(props.allUsers)\r\n            setSearch(text)\r\n        }\r\n    }\r\n\r\n    bs = React.createRef();\r\n    fall = new Animated.Value(1);\r\n\r\n  return (\r\n        <View style={styles.container}>\r\n        {gifMode == true ? \r\n          <BottomSheet \r\n              ref={this.bs}\r\n              snapPoints={[550, -5]}\r\n              renderContent={this.renderGifInner}\r\n              renderHeader={this.renderGifHeader}\r\n              initialSnap={1}\r\n              callbackNode={this.fall}\r\n              enabledGestureInteraction={true}       \r\n          />\r\n        :\r\n          <BottomSheet \r\n              ref={this.bs}\r\n              snapPoints={[550, -5]}\r\n              renderContent={this.renderTagInner}\r\n              renderHeader={this.renderTagHeader}\r\n              initialSnap={1}\r\n              callbackNode={this.fall}\r\n              enabledGestureInteraction={true}       \r\n          />\r\n        }\r\n          \r\n          <Animated.View style={{margin: 10, \r\n          opacity: Animated.add(0.1, Animated.multiply(this.fall, 1.0)),\r\n          }}>\r\n            {awayTeam ? <Text style={styles.gameText}>{awayTeam} vs {homeTeam}</Text> : null}\r\n            <View>\r\n              <View style={styles.typePostContainer}>\r\n                <Image \r\n                      style={styles.profilePhotoPostContainer}\r\n                      source={{uri: userData ? userData.userImg : 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7'}}\r\n                />\r\n                <TextInput\r\n                    placeholder=\"Know your stuff? Share your lock...\"\r\n                    style={styles.postTextInput}\r\n                    numberOfLines={4}\r\n                    multiline={true}\r\n                    maxLength={1000}\r\n                    value={post}\r\n                    onChangeText={(content) => setPost(content)}\r\n                />\r\n              </View>\r\n              {isUserTagged == true ?\r\n              <View style={styles.tagListContainer}>\r\n                <Text style={{ fontWeight: 'bold' }}>Tagged friends: </Text>\r\n                <Text style={{ color: '#0033cc', fontWeight: 'bold' }}>@{userTagList}</Text>\r\n                <TouchableOpacity onPress={() => {removeTaggedUser()}}>\r\n                    <Feather name=\"x-circle\" size={16} color =\"red\" />\r\n                </TouchableOpacity>\r\n              </View>\r\n              :\r\n                null}\r\n              \r\n\r\n            </View>\r\n            <View style={styles.addCommentButton}>\r\n                <View style={styles.galleryContainer}>\r\n                  <TouchableOpacity onPress={() => {this.bs.current.snapTo(0); setGifFunction()}}>\r\n                      <MaterialIcons name=\"gif\" size={28} justifyContent='center' alignItems='center' color=\"#86898B\"/>\r\n                  </TouchableOpacity>\r\n                  <TouchableOpacity onPress={() => {pickImage()}}>\r\n                      <MaterialCommunityIcons name=\"camera\" size={24} justifyContent='center' alignItems='center'  color=\"#86898B\"/>\r\n                  </TouchableOpacity>\r\n                  <TouchableOpacity onPress={() => {this.bs.current.snapTo(0); setTagFunction()}}>\r\n                      <FontAwesome5 name=\"user-tag\" size={24} justifyContent='center' alignItems='center'  color=\"#86898B\"/>\r\n                  </TouchableOpacity>\r\n                </View>\r\n                <View style={styles.postButtonContainer}>\r\n                {image == null && post == null ? \r\n                  <View style={styles.postButtonGreyed}>\r\n                      <Text style={styles.shareText}>POST</Text>\r\n                  </View>\r\n                  \r\n                  :\r\n                 \r\n                  <TouchableOpacity onPress={() => {uploadImage(); increasePostsCount(); sendNotificationForTag()}} style={styles.postButton}>\r\n                      <Text style={styles.shareText}>POST</Text>\r\n                  </TouchableOpacity>\r\n                }\r\n                </View>\r\n            </View>\r\n            {loading ? (\r\n                <View style={styles.StatusWrapper}>\r\n                  <ActivityIndicator size=\"large\"/>\r\n                </View>\r\n              ) : (\r\n                <View></View>\r\n                \r\n              )}\r\n            <View style={styles.xButton}>\r\n              {image != null ? \r\n                  <TouchableOpacity onPress={() => {removeImage()}}>\r\n                    <Feather name=\"x-circle\" size={24} color =\"red\" />\r\n                  </TouchableOpacity> : null}\r\n            </View>\r\n            \r\n            <View style={styles.InputWrapper}>\r\n              {image != null ? <Image source={{uri: image}} style={styles.AddImage}/> : null}\r\n            </View>\r\n          </Animated.View>\r\n        </View>\r\n      \r\n    \r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  typePostContainer: {\r\n    flexDirection: 'row',\r\n    margin: \"2%\",\r\n  },\r\n  InputWrapper: {\r\n    width: \"100%\",\r\n    alignItems: 'center',\r\n  },\r\nAddImage: {\r\n    width: \"80%\",\r\n    height: \"70%\",\r\n    marginTop: \"5%\",\r\n    alignItems: 'center',\r\n},\r\nStatusWrapper: {\r\n  justifyContent: 'center',\r\n  alignItems: 'center',\r\n},\r\nprofilePhotoPostContainer: {\r\n  backgroundColor: \"#e1e2e6\",\r\n  width: 50,\r\n  height: 50,\r\n  borderRadius: 40,\r\n  marginRight: \"2%\",\r\n},\r\nprofilePhotoPostContainer: {\r\n  backgroundColor: \"#e1e2e6\",\r\n  width: 40,\r\n  height: 40,\r\n  borderRadius: 40,\r\n  marginRight: \"2%\",\r\n},\r\nshareText: {\r\n  fontSize: 16,\r\n  fontWeight: \"bold\",\r\n  color: \"#fff\",\r\n  alignSelf: 'center',\r\n},\r\ngameText: { \r\n  fontWeight: 'bold',\r\n  marginLeft: \"2%\",\r\n  color: \"grey\"\r\n},\r\naddCommentButton: {\r\n  flexDirection: 'row',\r\n  borderBottomColor: \"#CACFD2\",\r\n  borderBottomWidth: 1,\r\n  borderTopColor: \"#CACFD2\",\r\n  borderTopWidth: 1,\r\n  justifyContent: 'space-between',\r\n  paddingLeft: 40,\r\n  paddingRight: 10,\r\n  paddingVertical: 8,\r\n},\r\ngalleryContainer: {\r\n  flexDirection: 'row',\r\n  marginLeft: \"5%\",\r\n  flex: 1,\r\n  justifyContent: 'space-between',\r\n  marginRight: \"25%\",\r\n},\r\npostButtonContainer: {\r\n  paddingRight: \"10%\",\r\n  \r\n},\r\npostButton: {\r\n  alignSelf: 'center',\r\n  backgroundColor: '#33A8FF',\r\n  borderRadius: 6,\r\n  alignSelf: 'center',\r\n  paddingVertical: 3,\r\n  paddingHorizontal: 8,\r\n},\r\npostButtonGreyed: {\r\n  alignSelf: 'center',\r\n  backgroundColor: '#CACFD2',\r\n  borderRadius: 6,\r\n  alignSelf: 'center',\r\n  paddingVertical: 3,\r\n  paddingHorizontal: 8,\r\n},\r\ntextInput: {\r\n  height: 30,\r\n  width: \"75%\",\r\n  paddingHorizontal: 20,\r\n  backgroundColor: \"#ffffff\",\r\n  borderRadius: 20,\r\n  borderWidth: 1,\r\n  borderColor: \"#e5e7e9\"\r\n\r\n},\r\npanel: {\r\n  padding: 20,\r\n  backgroundColor: '#FFFFFF',\r\n  paddingTop: 20,\r\n  width: '100%',\r\n  alignItems: 'center',\r\n},\r\nheader: {\r\n  backgroundColor: '#FFFFFF',\r\n  shadowColor: '#333333',\r\n  shadowOffset: {width: -1, height: -3},\r\n  shadowRadius: 2,\r\n  shadowOpacity: 0.4,\r\n  paddingTop: 20,\r\n  borderTopLeftRadius: 20,\r\n  borderTopRightRadius: 20,\r\n},\r\npanelHeader: {\r\n  alignItems: 'center',\r\n},\r\npanelHandle: {\r\n  width: 40,\r\n  height: 8,\r\n  borderRadius: 4,\r\n  backgroundColor: '#00000040',\r\n  marginBottom: 10,\r\n},\r\npanelTitle: {\r\n  fontSize: 27,\r\n  height: 35,\r\n},\r\npanelSubtitle: {\r\n  fontSize: 14,\r\n  color: 'gray',\r\n  height: 30,\r\n  marginBottom: 10,\r\n},\r\npanelButton: {\r\n  padding: 13,\r\n  borderRadius: 10,\r\n  backgroundColor: '#2e64e5',\r\n  alignItems: 'center',\r\n  marginVertical: 7,\r\n},\r\npanelButtonTitle: {\r\n  fontSize: 17,\r\n  fontWeight: 'bold',\r\n  color: 'white',\r\n},\r\nimage: {\r\n  width: 300,\r\n  height: 150,\r\n  marginBottom: 5,\r\n  borderRadius: 10,\r\n},\r\nsearchSection: {\r\n  flex: 1,\r\n  flexDirection: 'row',\r\n  justifyContent: 'center',\r\n  alignItems: 'center',\r\n},\r\nxButton: {\r\n  alignItems: 'flex-end',\r\n  paddingTop: 2,\r\n},\r\npostTextInput: {\r\n  width: Dimensions.get('window').width * .80,\r\n},\r\nfeedItem:{\r\n  padding:6,\r\n  marginVertical:2,\r\n  marginHorizontal:5,\r\n  borderBottomWidth: 1,\r\n  borderBottomColor: \"#e1e2e6\",\r\n  flexDirection: 'row',\r\n},\r\npostLeftContainer: {\r\n  flexDirection: \"row\",\r\n},\r\ntagListContainer: {\r\n  flexDirection: \"row\",\r\n},\r\nsearchResultsText: {\r\n  padding: 5,\r\n  alignSelf: 'center',\r\n  marginLeft: \"5%\",\r\n},\r\nadView: {\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n},\r\n\r\n})\r\n\r\nconst mapStateToProps = (store) => ({\r\n  allUsers: store.userState.allUsers,\r\n  currentUser: store.userState.currentUser,\r\n})\r\n\r\nexport default connect(mapStateToProps)(AddPostScreen);"],"mappings":"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"},"metadata":{},"sourceType":"module"}