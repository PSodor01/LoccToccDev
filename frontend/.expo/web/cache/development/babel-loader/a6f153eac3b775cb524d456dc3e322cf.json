{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\pauls\\\\Documents\\\\LoccToccDev\\\\frontend\\\\components\\\\main\\\\LikesList.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FontAwesome5 from \"@expo/vector-icons/FontAwesome5\";\nimport { useNavigation } from '@react-navigation/native';\nimport * as Analytics from 'expo-firebase-analytics';\nimport firebase from 'firebase';\n\nrequire(\"firebase/firestore\");\n\nrequire(\"firebase/firebase-storage\");\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { fetchUsersData } from \"../../redux/actions/index\";\n\nfunction LikesList(props) {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      users = _useState2[0],\n      setUsers = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      likeList = _useState4[0],\n      setLikeList = _useState4[1];\n\n  var _props$route$params = props.route.params,\n      userId = _props$route$params.userId,\n      postId = _props$route$params.postId;\n  useEffect(function () {\n    analytics().logEvent('screen_view', {\n      screen_name: 'LikesList'\n    });\n  }, []);\n  useEffect(function () {\n    function matchUserToLike(likeList) {\n      var _loop = function _loop(i) {\n        if (likeList[i].hasOwnProperty('user')) {\n          return \"continue\";\n        }\n\n        var user = props.users.find(function (x) {\n          return x.uid === likeList[i].id;\n        });\n\n        if (user == undefined) {\n          props.fetchUsersData(likeList[i].id, false);\n        } else {\n          likeList[i].user = user;\n        }\n      };\n\n      for (var i = 0; i < likeList.length; i++) {\n        var _ret = _loop(i);\n\n        if (_ret === \"continue\") continue;\n      }\n\n      setLikeList(likeList);\n    }\n\n    firestore().collection(\"posts\").doc(userId).collection(\"userPosts\").doc(postId).collection(\"likes\").get().then(function (snapshot) {\n      var likeList = snapshot.docs.map(function (doc) {\n        var data = doc.data();\n        var id = doc.id;\n        return _objectSpread({\n          id: id\n        }, data);\n      });\n      matchUserToLike(likeList);\n    });\n  }, [props.users]);\n\n  var EmptyListMessage = function EmptyListMessage() {\n    return React.createElement(Text, {\n      style: styles.emptyListStyle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }, \"No hammers yet, smash the hammer button on the post if you like the bet!\");\n  };\n\n  var navigation = useNavigation();\n  return React.createElement(View, {\n    style: styles.textInputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, React.createElement(FlatList, {\n    data: likeList,\n    ListEmptyComponent: EmptyListMessage,\n    style: styles.feed,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(View, {\n        style: styles.feedItem,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: styles.postLeftContainer,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }\n      }, React.createElement(Image, {\n        style: styles.profilePhotoPostContainer,\n        source: {\n          uri: item.user ? item.user.userImg : 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 29\n        }\n      }), React.createElement(Text, {\n        style: styles.searchResultsText,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }\n      }, item.user ? item.user.name : null)));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }));\n}\n\n;\nvar styles = StyleSheet.create({\n  textInputContainer: {\n    flex: 1,\n    backgroundColor: \"#ffffff\"\n  },\n  searchResultsText: {\n    fontSize: 16,\n    padding: 5,\n    alignSelf: 'center',\n    marginLeft: \"5%\"\n  },\n  profilePhotoPostContainer: {\n    backgroundColor: \"#e1e2e6\",\n    width: 50,\n    height: 50,\n    borderRadius: 40\n  },\n  feedItem: {\n    padding: 4,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#e1e2e6\",\n    flexDirection: 'row'\n  },\n  postLeftContainer: {\n    flexDirection: \"row\"\n  },\n  emptyListStyle: {\n    padding: 10,\n    fontSize: 18,\n    textAlign: 'justify',\n    marginHorizontal: \"5%\"\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    users: store.usersState.users\n  };\n};\n\nvar mapDispatchProps = function mapDispatchProps(dispatch) {\n  return bindActionCreators({\n    fetchUsersData: fetchUsersData\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchProps)(LikesList);","map":{"version":3,"names":["React","useState","useEffect","FontAwesome5","useNavigation","Analytics","firebase","require","connect","bindActionCreators","fetchUsersData","LikesList","props","users","setUsers","likeList","setLikeList","route","params","userId","postId","logEvent","screen_name","matchUserToLike","i","hasOwnProperty","user","find","x","uid","id","undefined","length","firestore","collection","doc","get","then","snapshot","docs","map","data","EmptyListMessage","styles","emptyListStyle","navigation","textInputContainer","feed","item","feedItem","postLeftContainer","profilePhotoPostContainer","uri","userImg","searchResultsText","name","StyleSheet","create","flex","backgroundColor","fontSize","padding","alignSelf","marginLeft","width","height","borderRadius","borderBottomWidth","borderBottomColor","flexDirection","textAlign","marginHorizontal","mapStateToProps","store","usersState","mapDispatchProps","dispatch"],"sources":["C:/Users/pauls/Documents/LoccToccDev/frontend/components/main/LikesList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { View, Text, TextInput, FlatList, TouchableOpacity, StyleSheet, Image } from 'react-native'\r\n\r\nimport FontAwesome5 from 'react-native-vector-icons/FontAwesome5'\r\n\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nimport * as Analytics from 'expo-firebase-analytics';\r\n\r\nimport firebase from 'firebase'\r\nrequire(\"firebase/firestore\")\r\nrequire(\"firebase/firebase-storage\")\r\n\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport { fetchUsersData } from '../../redux/actions/index'\r\n\r\nfunction LikesList(props) {\r\n    const [users, setUsers] = useState([])\r\n    const [likeList, setLikeList] = useState([])\r\n\r\n    const { userId, postId } = props.route.params;\r\n\r\n    useEffect(() => {\r\n        analytics().logEvent('screen_view', { screen_name: 'LikesList' })\r\n    }, [])\r\n\r\n    \r\n    useEffect(() => {\r\n\r\n        function matchUserToLike(likeList) {\r\n            for (let i = 0; i < likeList.length; i++) {\r\n                if (likeList[i].hasOwnProperty('user')) {\r\n                    continue;\r\n                }\r\n\r\n                const user = props.users.find(x => x.uid === likeList[i].id)\r\n                if (user == undefined) {\r\n                    props.fetchUsersData(likeList[i].id, false)\r\n                } else {\r\n                    likeList[i].user = user\r\n                }\r\n            }\r\n            setLikeList(likeList)\r\n            \r\n\r\n            \r\n        }\r\n        firestore()\r\n            .collection(\"posts\")\r\n            .doc(userId)\r\n            .collection(\"userPosts\")\r\n            .doc(postId)\r\n            .collection(\"likes\")\r\n            .get()\r\n            .then((snapshot) => {\r\n                let likeList = snapshot.docs.map(doc => {\r\n                    const data = doc.data();\r\n                    const id = doc.id;\r\n                    return { id, ...data }\r\n                })\r\n                matchUserToLike(likeList)\r\n            })\r\n\r\n        \r\n    }, [props.users])\r\n\r\n    const EmptyListMessage = () => {\r\n        return (\r\n          // Flat List Item\r\n          <Text\r\n            style={styles.emptyListStyle}\r\n            >\r\n            No hammers yet, smash the hammer button on the post if you like the bet!\r\n          </Text>\r\n        );\r\n      };\r\n\r\n    const navigation = useNavigation();\r\n\r\n    return (\r\n        <View style={styles.textInputContainer}>\r\n            <FlatList\r\n                data = {likeList}\r\n                ListEmptyComponent={EmptyListMessage}\r\n                style={styles.feed}\r\n                renderItem={({ item }) => (\r\n                    <View style={styles.feedItem}>\r\n                        <TouchableOpacity style={styles.postLeftContainer}>\r\n                            <Image \r\n                                style={styles.profilePhotoPostContainer}\r\n                                source={{uri: item.user ? item.user.userImg : 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7'}}\r\n                            />\r\n                            <Text style={styles.searchResultsText}>{item.user ? item.user.name : null}</Text>\r\n                        </TouchableOpacity>\r\n                        \r\n                    </View>\r\n                    \r\n            )}\r\n            />\r\n        </View>\r\n    )\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    textInputContainer: {\r\n        flex: 1,\r\n        backgroundColor: \"#ffffff\",\r\n\r\n    },\r\n    searchResultsText: {\r\n        fontSize: 16,\r\n        padding: 5,\r\n        alignSelf: 'center',\r\n        marginLeft: \"5%\",\r\n    },\r\n    profilePhotoPostContainer: {\r\n        backgroundColor: \"#e1e2e6\",\r\n        width: 50,\r\n        height: 50,\r\n        borderRadius: 40,\r\n    },\r\n    feedItem:{\r\n        padding:4,\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: \"#e1e2e6\",\r\n        flexDirection: 'row',\r\n    },\r\n    postLeftContainer: {\r\n        flexDirection: \"row\",\r\n    },\r\n    emptyListStyle: {\r\n        padding: 10,\r\n        fontSize: 18,\r\n        textAlign: 'justify',\r\n        marginHorizontal: \"5%\",\r\n      },\r\n    \r\n   \r\n    \r\n})\r\n\r\nconst mapStateToProps = (store) => ({\r\n    users: store.usersState.users,\r\n})\r\nconst mapDispatchProps = (dispatch) => bindActionCreators({ fetchUsersData }, dispatch);\r\n\r\nexport default connect(mapStateToProps,  mapDispatchProps)(LikesList);\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}