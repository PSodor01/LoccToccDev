{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\pauls\\\\Documents\\\\LoccToccDev\\\\frontend\\\\components\\\\main\\\\EditProfile.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useContext, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Animated from 'react-native-reanimated';\nimport BottomSheet from 'reanimated-bottom-sheet';\nimport { Camera } from 'expo-camera';\nimport * as ImagePicker from 'expo-image-picker';\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport FontAwesome from \"@expo/vector-icons/FontAwesome\";\nimport * as Analytics from 'expo-firebase-analytics';\nimport firebase from 'firebase';\n\nrequire(\"firebase/firestore\");\n\nrequire(\"firebase/firebase-storage\");\n\nimport { connect } from 'react-redux';\n\nfunction EditProfileScreen(props) {\n  var _this = this;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasGalleryPermission = _useState2[0],\n      setHasGalleryPermission = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasCameraPermission = _useState4[0],\n      setHasCameraPermission = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      camera = _useState6[0],\n      setCamera = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      image = _useState8[0],\n      setImage = _useState8[1];\n\n  var _useState9 = useState(Camera.Constants.Type.back),\n      _useState10 = _slicedToArray(_useState9, 2),\n      type = _useState10[0],\n      setType = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      userData = _useState12[0],\n      setUserData = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      loading = _useState14[0],\n      setLoading = _useState14[1];\n\n  var _useState15 = useState(0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      transferred = _useState16[0],\n      setTransferred = _useState16[1];\n\n  var getUser = function getUser() {\n    var currentUser;\n    return _regeneratorRuntime.async(function getUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(firebase.firestore().collection('users').doc(firebase.auth().currentUser.uid).get().then(function (documentSnapshot) {\n              if (documentSnapshot.exists) {\n                console.log('User Data', documentSnapshot.data());\n                setUserData(documentSnapshot.data());\n              }\n            }));\n\n          case 2:\n            currentUser = _context.sent;\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleUpdate = function handleUpdate() {\n    var imgUrl;\n    return _regeneratorRuntime.async(function handleUpdate$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            analytics().logEvent('submitEditProfile', {\n              user_name: props.currentUser.name\n            });\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(uploadImage());\n\n          case 3:\n            imgUrl = _context2.sent;\n\n            if (imgUrl == null && userData.userImg) {\n              imgUrl = userData.userImg;\n            }\n\n            firebase.firestore().collection('users').doc(firebase.auth().currentUser.uid).update({\n              name: userData.name,\n              email: userData.email,\n              aboutMe: userData.aboutMe,\n              location: userData.location,\n              userImg: imgUrl\n            }).then(function () {\n              console.log('User Updated!');\n              Alert.alert('Profile Updated!', 'Your profile has been updated successfully.');\n            });\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var uploadImage = function uploadImage() {\n    var uploadUri, filename, childPath, extension, name, response, blob, task, url;\n    return _regeneratorRuntime.async(function uploadImage$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (!(image == null)) {\n              _context3.next = 2;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", null);\n\n          case 2:\n            uploadUri = image;\n            filename = uploadUri.substring(uploadUri.lastIndexOf('/') + 1);\n            childPath = \"post/\" + firebase.auth().currentUser.uid + \"/\" + Math.random().toString(36);\n            extension = filename.split('.').pop();\n            name = filename.split('.').slice(0, -1).join('.');\n            filename = name + Date.now() + '.' + extension;\n            setLoading(true);\n            setTransferred(0);\n            _context3.next = 12;\n            return _regeneratorRuntime.awrap(fetch(uploadUri));\n\n          case 12:\n            response = _context3.sent;\n            _context3.next = 15;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 15:\n            blob = _context3.sent;\n            task = firebase.storage().ref().child(childPath).put(blob);\n            task.on('state_changed', function (taskSnapshot) {\n              console.log(taskSnapshot.bytesTransferred + \" transferred out of \" + taskSnapshot.totalBytes);\n              setTransferred(Math.round(taskSnapshot.bytesTransferred / taskSnapshot.totalBytes) * 100);\n            });\n            _context3.prev = 18;\n            _context3.next = 21;\n            return _regeneratorRuntime.awrap(task);\n\n          case 21:\n            _context3.next = 23;\n            return _regeneratorRuntime.awrap(task.snapshot.ref.getDownloadURL());\n\n          case 23:\n            url = _context3.sent;\n            setLoading(false);\n            setImage(null);\n            return _context3.abrupt(\"return\", url);\n\n          case 29:\n            _context3.prev = 29;\n            _context3.t0 = _context3[\"catch\"](18);\n            console.log(_context3.t0);\n            return _context3.abrupt(\"return\", null);\n\n          case 33:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[18, 29]], Promise);\n  };\n\n  useEffect(function () {\n    getUser();\n    analytics().logEvent('screen_view', {\n      screen_name: 'EditProfile',\n      user_name: props.currentUser.name\n    });\n  }, []);\n  useEffect(function () {\n    (function _callee() {\n      var cameraStatus, galleryStatus;\n      return _regeneratorRuntime.async(function _callee$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestPermissionsAsync());\n\n            case 2:\n              cameraStatus = _context4.sent;\n              setHasCameraPermission(cameraStatus.status === 'granted');\n              _context4.next = 6;\n              return _regeneratorRuntime.awrap(ImagePicker.requestMediaLibraryPermissionsAsync());\n\n            case 6:\n              galleryStatus = _context4.sent;\n              setHasGalleryPermission(galleryStatus.status === 'granted');\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  var takePicture = function takePicture() {\n    var data;\n    return _regeneratorRuntime.async(function takePicture$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            if (!camera) {\n              _context5.next = 6;\n              break;\n            }\n\n            _context5.next = 3;\n            return _regeneratorRuntime.awrap(camera.takePictureAsync(null));\n\n          case 3:\n            data = _context5.sent;\n            setImage(result.uri);\n\n            _this.bs.current.snapTo(1);\n\n          case 6:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var pickImage = function pickImage() {\n    var result;\n    return _regeneratorRuntime.async(function pickImage$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            analytics().logEvent('changeProfilePicture', {\n              user_name: props.currentUser.name\n            });\n            _context6.next = 3;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Images,\n              allowsEditing: true,\n              aspect: [1, 1],\n              quality: 1\n            }));\n\n          case 3:\n            result = _context6.sent;\n            console.log(result);\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n\n              _this.bs.current.snapTo(1);\n            }\n\n          case 6:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  renderInner = function renderInner() {\n    return React.createElement(View, {\n      style: styles.panel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }\n    }, React.createElement(View, {\n      style: {\n        alignItems: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: styles.panelTitle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }, \"Upload Photo\"), React.createElement(Text, {\n      style: styles.panelSubtitle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    }, \"Choose Your Profile Picture\")), React.createElement(TouchableOpacity, {\n      style: styles.panelButton,\n      onPress: pickImage,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: styles.panelButtonTitle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }, \"Choose From Library\")), React.createElement(TouchableOpacity, {\n      style: styles.panelButton,\n      onPress: function onPress() {\n        return _this.bs.current.snapTo(1);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: styles.panelButtonTitle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }\n    }, \"Cancel\")));\n  };\n\n  renderHeader = function renderHeader() {\n    return React.createElement(View, {\n      style: styles.header,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }\n    }, React.createElement(View, {\n      style: styles.panelHeader,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }, React.createElement(View, {\n      style: styles.panelHandle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }\n    })));\n  };\n\n  bs = React.createRef();\n  fall = new Animated.Value(1);\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, React.createElement(BottomSheet, {\n    ref: this.bs,\n    snapPoints: [330, -5],\n    renderContent: this.renderInner,\n    renderHeader: this.renderHeader,\n    initialSnap: 1,\n    callbackNode: this.fall,\n    enabledGestureInteraction: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }\n  }), React.createElement(Animated.View, {\n    style: {\n      margin: 20,\n      opacity: Animated.add(0.1, Animated.multiply(this.fall, 1.0))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 17\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return _this.bs.current.snapTo(0);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: {\n      height: 100,\n      width: 100,\n      borderRadius: 15,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 21\n    }\n  }, React.createElement(ImageBackground, {\n    source: {\n      uri: image ? image : userData ? userData.userImg || 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7' : 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7'\n    },\n    style: styles.profilePhotoContainer,\n    imageStyle: {\n      borderRadius: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 25\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 29\n    }\n  }, React.createElement(MaterialCommunityIcons, {\n    name: \"camera\",\n    size: 35,\n    color: \"#fff\",\n    style: {\n      opacity: 0.7,\n      alignItems: 'center',\n      justifyContent: 'center',\n      borderWidth: 1,\n      borderColor: '#fff',\n      borderRadius: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 29\n    }\n  }))))), React.createElement(Text, {\n    style: {\n      marginTop: 10,\n      fontSize: 18,\n      fontWeight: 'bold'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 21\n    }\n  }, userData ? userData.name : '')), React.createElement(View, {\n    style: styles.action,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 17\n    }\n  }, React.createElement(FontAwesome, {\n    name: \"user-o\",\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 21\n    }\n  }), React.createElement(TextInput, {\n    placeholder: \"Name\",\n    placeholderTextColor: \"#666666\",\n    autoCorrect: false,\n    value: userData ? userData.name : '',\n    onChangeText: function onChangeText(txt) {\n      return setUserData(_objectSpread(_objectSpread({}, userData), {}, {\n        name: txt\n      }));\n    },\n    style: styles.textInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 21\n    }\n  })), React.createElement(View, {\n    style: styles.action,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 17\n    }\n  }, React.createElement(FontAwesome, {\n    name: \"envelope-o\",\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 21\n    }\n  }), React.createElement(TextInput, {\n    placeholder: \"Email\",\n    placeholderTextColor: \"#666666\",\n    keyboardType: \"email-address\",\n    autoCorrect: false,\n    value: userData ? userData.email : '',\n    onChangeText: function onChangeText(txt) {\n      return setUserData(_objectSpread(_objectSpread({}, userData), {}, {\n        email: txt\n      }));\n    },\n    style: styles.textInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 21\n    }\n  })), React.createElement(View, {\n    style: styles.action,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 17\n    }\n  }, React.createElement(FontAwesome, {\n    name: \"user-o\",\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 21\n    }\n  }), React.createElement(TextInput, {\n    placeholder: \"About Me\",\n    placeholderTextColor: \"#666666\",\n    value: userData ? userData.aboutMe : '',\n    onChangeText: function onChangeText(txt) {\n      return setUserData(_objectSpread(_objectSpread({}, userData), {}, {\n        aboutMe: txt\n      }));\n    },\n    style: styles.textInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 21\n    }\n  })), React.createElement(View, {\n    style: styles.action,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 17\n    }\n  }, React.createElement(FontAwesome, {\n    name: \"globe\",\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 21\n    }\n  }), React.createElement(TextInput, {\n    placeholder: \"Location\",\n    placeholderTextColor: \"#666666\",\n    value: userData ? userData.location : '',\n    onChangeText: function onChangeText(txt) {\n      return setUserData(_objectSpread(_objectSpread({}, userData), {}, {\n        location: txt\n      }));\n    },\n    style: styles.textInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 21\n    }\n  })), React.createElement(TouchableOpacity, {\n    style: styles.commandButton,\n    onPress: handleUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: styles.panelButtonTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 21\n    }\n  }, \"Submit\")), loading ? React.createElement(View, {\n    style: styles.StatusWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 19\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 21\n    }\n  })) : React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 19\n    }\n  })));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#ffffff'\n  },\n  commandButton: {\n    padding: 15,\n    borderRadius: 10,\n    alignItems: 'center',\n    marginTop: 10,\n    backgroundColor: \"#009387\"\n  },\n  panel: {\n    padding: 20,\n    backgroundColor: '#FFFFFF',\n    paddingTop: 20,\n    width: '100%'\n  },\n  header: {\n    backgroundColor: '#FFFFFF',\n    shadowColor: '#333333',\n    shadowOffset: {\n      width: -1,\n      height: -3\n    },\n    shadowRadius: 2,\n    shadowOpacity: 0.4,\n    paddingTop: 20,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20\n  },\n  panelHeader: {\n    alignItems: 'center'\n  },\n  panelHandle: {\n    width: 40,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#00000040',\n    marginBottom: 10\n  },\n  panelTitle: {\n    fontSize: 27,\n    height: 35\n  },\n  panelSubtitle: {\n    fontSize: 14,\n    color: 'gray',\n    height: 30,\n    marginBottom: 10\n  },\n  panelButton: {\n    padding: 13,\n    borderRadius: 10,\n    backgroundColor: '#2e64e5',\n    alignItems: 'center',\n    marginVertical: 7\n  },\n  panelButtonTitle: {\n    fontSize: 17,\n    fontWeight: 'bold',\n    color: 'white'\n  },\n  action: {\n    flexDirection: 'row',\n    marginTop: 10,\n    marginBottom: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: '#f2f2f2',\n    paddingBottom: 5\n  },\n  actionError: {\n    flexDirection: 'row',\n    marginTop: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: '#FF0000',\n    paddingBottom: 5\n  },\n  textInput: {\n    flex: 1,\n    marginTop: Platform.OS === 'ios' ? 0 : -12,\n    paddingLeft: 10,\n    color: '#333333'\n  },\n  profilePhotoContainer: {\n    backgroundColor: \"#e1e2e6\",\n    width: 100,\n    height: 100,\n    borderRadius: 40,\n    alignSelf: 'center',\n    marginTop: 16,\n    overflow: 'hidden',\n    marginBottom: 10\n  },\n  StatusWrapper: {\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.userState.currentUser\n  };\n};\n\nexport default connect(mapStateToProps)(EditProfileScreen);","map":{"version":3,"names":["React","useEffect","useContext","useState","Animated","BottomSheet","Camera","ImagePicker","MaterialCommunityIcons","FontAwesome","Analytics","firebase","require","connect","EditProfileScreen","props","hasGalleryPermission","setHasGalleryPermission","hasCameraPermission","setHasCameraPermission","camera","setCamera","image","setImage","Constants","Type","back","type","setType","userData","setUserData","loading","setLoading","transferred","setTransferred","getUser","firestore","collection","doc","auth","currentUser","uid","get","then","documentSnapshot","exists","console","log","data","handleUpdate","logEvent","user_name","name","uploadImage","imgUrl","userImg","update","email","aboutMe","location","Alert","alert","uploadUri","filename","substring","lastIndexOf","childPath","Math","random","toString","extension","split","pop","slice","join","Date","now","fetch","response","blob","task","storage","ref","child","put","on","taskSnapshot","bytesTransferred","totalBytes","round","snapshot","getDownloadURL","url","screen_name","requestPermissionsAsync","cameraStatus","status","requestMediaLibraryPermissionsAsync","galleryStatus","takePicture","takePictureAsync","result","uri","bs","current","snapTo","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","cancelled","renderInner","styles","panel","alignItems","panelTitle","panelSubtitle","panelButton","panelButtonTitle","renderHeader","header","panelHeader","panelHandle","createRef","fall","Value","container","margin","opacity","add","multiply","height","width","borderRadius","justifyContent","profilePhotoContainer","flex","borderWidth","borderColor","marginTop","fontSize","fontWeight","action","txt","textInput","commandButton","StatusWrapper","StyleSheet","create","backgroundColor","padding","paddingTop","shadowColor","shadowOffset","shadowRadius","shadowOpacity","borderTopLeftRadius","borderTopRightRadius","marginBottom","color","marginVertical","flexDirection","borderBottomWidth","borderBottomColor","paddingBottom","actionError","Platform","OS","paddingLeft","alignSelf","overflow","mapStateToProps","store","userState"],"sources":["C:/Users/pauls/Documents/LoccToccDev/frontend/components/main/EditProfile.js"],"sourcesContent":["import React, {useEffect, useContext, useState} from 'react';\r\nimport { Text, View, StyleSheet, ActivityIndicator, TouchableOpacity, TextInput, Image, Alert, ImageBackground } from 'react-native';\r\n\r\nimport Animated from 'react-native-reanimated';\r\nimport BottomSheet from 'reanimated-bottom-sheet';\r\nimport { Camera } from 'expo-camera';\r\nimport * as ImagePicker from 'expo-image-picker';\r\n\r\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\r\nimport FontAwesome from 'react-native-vector-icons/FontAwesome';\r\n\r\nimport * as Analytics from 'expo-firebase-analytics';\r\n\r\nimport firebase from 'firebase'\r\nrequire(\"firebase/firestore\")\r\nrequire(\"firebase/firebase-storage\")\r\n\r\nimport { connect } from 'react-redux'\r\n\r\nfunction EditProfileScreen(props) {\r\n    const [hasGalleryPermission, setHasGalleryPermission] = useState(null);\r\n    const [hasCameraPermission, setHasCameraPermission] = useState(null);\r\n    const [camera, setCamera] = useState(null);\r\n    const [image, setImage] = useState(null);\r\n    const [type, setType] = useState(Camera.Constants.Type.back);\r\n    const [userData, setUserData] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [transferred, setTransferred] = useState(0);\r\n    \r\n    const getUser = async() => {\r\n        const currentUser = await firebase.firestore()\r\n        .collection('users')\r\n        .doc(firebase.auth().currentUser.uid)\r\n        .get()\r\n        .then((documentSnapshot) => {\r\n        if( documentSnapshot.exists ) {\r\n            console.log('User Data', documentSnapshot.data());\r\n            setUserData(documentSnapshot.data());\r\n        }\r\n        })\r\n    }\r\n\r\n    const handleUpdate = async() => {\r\n\r\n      analytics().logEvent('submitEditProfile', { user_name: props.currentUser.name});\r\n\r\n        let imgUrl = await uploadImage();\r\n\r\n        if( imgUrl == null && userData.userImg ) {\r\n            imgUrl = userData.userImg;\r\n        }\r\n\r\n        firebase.firestore()\r\n        .collection('users')\r\n        .doc(firebase.auth().currentUser.uid)\r\n        .update({\r\n        name: userData.name,\r\n        email: userData.email,\r\n        aboutMe: userData.aboutMe,\r\n        location: userData.location,\r\n        userImg: imgUrl,\r\n        })\r\n        .then(() => {\r\n        console.log('User Updated!');\r\n        Alert.alert(\r\n            'Profile Updated!',\r\n            'Your profile has been updated successfully.'\r\n        );\r\n        })\r\n    }\r\n\r\n    const uploadImage = async () => {\r\n        if( image == null ) {\r\n          return null;\r\n        }\r\n        const uploadUri = image;\r\n        let filename = uploadUri.substring(uploadUri.lastIndexOf('/') + 1);\r\n\r\n        const childPath = `post/${firebase.auth().currentUser.uid}/${Math.random().toString(36)}`;\r\n    \r\n        // Add timestamp to File Name\r\n        const extension = filename.split('.').pop(); \r\n        const name = filename.split('.').slice(0, -1).join('.');\r\n        filename = name + Date.now() + '.' + extension;\r\n    \r\n        setLoading(true);\r\n        setTransferred(0);\r\n\r\n        const response = await fetch(uploadUri);\r\n        const blob = await response.blob();\r\n\r\n        const task = firebase\r\n            .storage()\r\n            .ref()\r\n            .child(childPath)\r\n            .put(blob);\r\n\r\n       \r\n        // Set transferred state\r\n        task.on('state_changed', (taskSnapshot) => {\r\n          console.log(\r\n            `${taskSnapshot.bytesTransferred} transferred out of ${taskSnapshot.totalBytes}`,\r\n          );\r\n    \r\n          setTransferred(\r\n            Math.round(taskSnapshot.bytesTransferred / taskSnapshot.totalBytes) *\r\n              100,\r\n          );\r\n        });\r\n    \r\n        try {\r\n          await task;\r\n    \r\n          const url = await task.snapshot.ref.getDownloadURL();\r\n    \r\n          setLoading(false);\r\n          setImage(null);\r\n    \r\n          // Alert.alert(\r\n          //   'Image uploaded!',\r\n          //   'Your image has been uploaded to the Firebase Cloud Storage Successfully!',\r\n          // );\r\n          return url;\r\n    \r\n        } catch (e) {\r\n          console.log(e);\r\n          return null;\r\n        }\r\n    \r\n      };\r\n\r\n    useEffect(() => {\r\n        getUser();\r\n\r\n        analytics().logEvent('screen_view', { screen_name: 'EditProfile',  user_name: props.currentUser.name })\r\n    },[]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n          const cameraStatus = await Camera.requestPermissionsAsync();\r\n          setHasCameraPermission(cameraStatus.status === 'granted');\r\n    \r\n          const galleryStatus = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n          setHasGalleryPermission(galleryStatus.status === 'granted');\r\n    \r\n    \r\n        })();\r\n      }, []);\r\n    \r\n      const takePicture = async () => {\r\n        if (camera) {\r\n          const data = await camera.takePictureAsync(null);\r\n          setImage(result.uri);\r\n          this.bs.current.snapTo(1);\r\n        }\r\n      }\r\n    \r\n      const pickImage = async () => {\r\n\r\n        analytics().logEvent('changeProfilePicture', { user_name: props.currentUser.name});\r\n\r\n        let result = await ImagePicker.launchImageLibraryAsync({\r\n          mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n          allowsEditing: true,\r\n          aspect: [1, 1],\r\n          quality: 1,\r\n        });\r\n        console.log(result);\r\n    \r\n        if (!result.cancelled) {\r\n          setImage(result.uri);\r\n          this.bs.current.snapTo(1);\r\n        }\r\n      };\r\n    \r\n    \r\n    \r\n      /*if (hasCameraPermission === null || hasGalleryPermission === false) {\r\n        return <View />;\r\n      }\r\n      if (hasCameraPermission === false || hasGalleryPermission === false) {\r\n        return <Text>No access to camera</Text>;\r\n      } */\r\n    \r\n    renderInner = () => (\r\n        <View style={styles.panel}>\r\n          <View style={{alignItems: 'center'}}>\r\n            <Text style={styles.panelTitle}>Upload Photo</Text>\r\n            <Text style={styles.panelSubtitle}>Choose Your Profile Picture</Text>\r\n          </View>\r\n          <TouchableOpacity\r\n            style={styles.panelButton}\r\n            onPress={pickImage}>\r\n            <Text style={styles.panelButtonTitle}>Choose From Library</Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity\r\n            style={styles.panelButton}\r\n            onPress={() => this.bs.current.snapTo(1)}>\r\n            <Text style={styles.panelButtonTitle}>Cancel</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      );\r\n    \r\n      renderHeader = () => (\r\n        <View style={styles.header}>\r\n          <View style={styles.panelHeader}>\r\n            <View style={styles.panelHandle} />\r\n          </View>\r\n        </View>\r\n      );\r\n\r\n    bs = React.createRef();\r\n    fall = new Animated.Value(1);\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <BottomSheet \r\n                ref={this.bs}\r\n                snapPoints={[330, -5]}\r\n                renderContent={this.renderInner}\r\n                renderHeader={this.renderHeader}\r\n                initialSnap={1}\r\n                callbackNode={this.fall}\r\n                enabledGestureInteraction={true}       \r\n            />\r\n            <Animated.View style={{margin: 20, \r\n            opacity: Animated.add(0.1, Animated.multiply(this.fall, 1.0)),\r\n            }}>\r\n                <View style={{alignItems: 'center'}}>\r\n                <TouchableOpacity onPress={() => this.bs.current.snapTo(0)}>\r\n                    <View\r\n                    style={{\r\n                        height: 100,\r\n                        width: 100,\r\n                        borderRadius: 15,\r\n                        justifyContent: 'center',\r\n                        alignItems: 'center',\r\n                    }}>\r\n                        <ImageBackground\r\n                            source={{\r\n                            uri: image\r\n                                ? image\r\n                                : userData\r\n                                ? userData.userImg ||\r\n                                'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7'\r\n                                : 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7',\r\n                            }}\r\n                            style={styles.profilePhotoContainer}\r\n                            imageStyle={{borderRadius: 15}}>\r\n                            <View\r\n                            style={{\r\n                                flex: 1,\r\n                                justifyContent: 'center',\r\n                                alignItems: 'center',\r\n                            }}>\r\n                            <MaterialCommunityIcons\r\n                                name=\"camera\"\r\n                                size={35}\r\n                                color=\"#fff\"\r\n                                style={{\r\n                                    opacity: 0.7,\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    borderWidth: 1,\r\n                                    borderColor: '#fff',\r\n                                    borderRadius: 10,\r\n                                }}\r\n                            />\r\n                            </View>\r\n                        </ImageBackground>\r\n                    </View>\r\n                </TouchableOpacity>\r\n                    <Text style={{marginTop: 10, fontSize: 18, fontWeight: 'bold'}}>{userData ? userData.name : ''}</Text>\r\n                </View>\r\n\r\n                <View style={styles.action}>\r\n                    <FontAwesome name=\"user-o\" size={20} />\r\n                    <TextInput \r\n                        placeholder=\"Name\"\r\n                        placeholderTextColor=\"#666666\"\r\n                        autoCorrect={false}\r\n                        value={userData ? userData.name : ''}\r\n                        onChangeText={(txt) => setUserData({...userData, name: txt})}\r\n                        style={styles.textInput}\r\n                    />\r\n                </View>\r\n                <View style={styles.action}>\r\n                    <FontAwesome name=\"envelope-o\" size={20} />\r\n                    <TextInput \r\n                        placeholder=\"Email\"\r\n                        placeholderTextColor=\"#666666\"\r\n                        keyboardType='email-address'\r\n                        autoCorrect={false}\r\n                        value={userData ? userData.email : ''}\r\n                        onChangeText={(txt) => setUserData({...userData, email: txt})}\r\n                        style={styles.textInput}\r\n                    />\r\n                </View>\r\n                <View style={styles.action}>\r\n                    <FontAwesome name=\"user-o\" size={20} />\r\n                    <TextInput \r\n                        placeholder=\"About Me\"\r\n                        placeholderTextColor=\"#666666\"\r\n                        value={userData ? userData.aboutMe : ''}\r\n                        onChangeText={(txt) => setUserData({...userData, aboutMe: txt})}\r\n                        style={styles.textInput}\r\n                    />\r\n                </View>\r\n                <View style={styles.action}>\r\n                    <FontAwesome name=\"globe\" size={20} />\r\n                    <TextInput \r\n                        placeholder=\"Location\"\r\n                        placeholderTextColor=\"#666666\"\r\n                        value={userData ? userData.location : ''}\r\n                        onChangeText={(txt) => setUserData({...userData, location: txt})}\r\n                        style={styles.textInput}\r\n                    />\r\n                </View>\r\n                <TouchableOpacity style={styles.commandButton} onPress={handleUpdate}>\r\n                    <Text style={styles.panelButtonTitle}>Submit</Text>\r\n                </TouchableOpacity>\r\n                {loading ? (\r\n                  <View style={styles.StatusWrapper}>\r\n                    <ActivityIndicator size=\"large\"/>\r\n                  </View>\r\n                ) : (\r\n                  <View></View>\r\n                  \r\n                )}\r\n            </Animated.View>\r\n        </View>\r\n    )\r\n}\r\n    \r\nconst styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: '#ffffff',\r\n    },\r\n    commandButton: {\r\n      padding: 15,\r\n      borderRadius: 10,\r\n      alignItems: 'center',\r\n      marginTop: 10,\r\n      backgroundColor: \"#009387\",\r\n    },\r\n    panel: {\r\n      padding: 20,\r\n      backgroundColor: '#FFFFFF',\r\n      paddingTop: 20,\r\n      width: '100%',\r\n    },\r\n    header: {\r\n      backgroundColor: '#FFFFFF',\r\n      shadowColor: '#333333',\r\n      shadowOffset: {width: -1, height: -3},\r\n      shadowRadius: 2,\r\n      shadowOpacity: 0.4,\r\n      paddingTop: 20,\r\n      borderTopLeftRadius: 20,\r\n      borderTopRightRadius: 20,\r\n    },\r\n    panelHeader: {\r\n      alignItems: 'center',\r\n    },\r\n    panelHandle: {\r\n      width: 40,\r\n      height: 8,\r\n      borderRadius: 4,\r\n      backgroundColor: '#00000040',\r\n      marginBottom: 10,\r\n    },\r\n    panelTitle: {\r\n      fontSize: 27,\r\n      height: 35,\r\n    },\r\n    panelSubtitle: {\r\n      fontSize: 14,\r\n      color: 'gray',\r\n      height: 30,\r\n      marginBottom: 10,\r\n    },\r\n    panelButton: {\r\n      padding: 13,\r\n      borderRadius: 10,\r\n      backgroundColor: '#2e64e5',\r\n      alignItems: 'center',\r\n      marginVertical: 7,\r\n    },\r\n    panelButtonTitle: {\r\n      fontSize: 17,\r\n      fontWeight: 'bold',\r\n      color: 'white',\r\n    },\r\n    action: {\r\n      flexDirection: 'row',\r\n      marginTop: 10,\r\n      marginBottom: 10,\r\n      borderBottomWidth: 1,\r\n      borderBottomColor: '#f2f2f2',\r\n      paddingBottom: 5,\r\n    },\r\n    actionError: {\r\n      flexDirection: 'row',\r\n      marginTop: 10,\r\n      borderBottomWidth: 1,\r\n      borderBottomColor: '#FF0000',\r\n      paddingBottom: 5,\r\n    },\r\n    textInput: {\r\n      flex: 1,\r\n      marginTop: Platform.OS === 'ios' ? 0 : -12,\r\n      paddingLeft: 10,\r\n      color: '#333333',\r\n    },\r\n    profilePhotoContainer: {\r\n        backgroundColor: \"#e1e2e6\",\r\n        width: 100,\r\n        height: 100,\r\n        borderRadius: 40,\r\n        alignSelf: 'center',\r\n        marginTop: 16,\r\n        overflow: 'hidden',\r\n        marginBottom: 10,\r\n    },\r\n    StatusWrapper: {\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n    },\r\n  });\r\n\r\n  const mapStateToProps = (store) => ({\r\n    currentUser: store.userState.currentUser,\r\n\r\n\r\n})\r\n\r\nexport default connect(mapStateToProps)(EditProfileScreen);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}