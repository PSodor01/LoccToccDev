{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\pauls\\\\Documents\\\\LoccToccDev\\\\frontend\\\\components\\\\main\\\\FollowerScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useNavigation } from '@react-navigation/native';\nimport * as Analytics from 'expo-firebase-analytics';\nimport firebase from 'firebase';\n\nrequire(\"firebase/firestore\");\n\nrequire(\"firebase/firebase-storage\");\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { fetchUsersData } from \"../../redux/actions/index\";\n\nfunction FollowerScreen(props) {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      following = _useState2[0],\n      setFollowing = _useState2[1];\n\n  var userId = props.route.params.userId;\n  useEffect(function () {\n    analytics().logEvent('screen_view', {\n      screen_name: 'FollowerList'\n    });\n  }, []);\n  useEffect(function () {\n    function matchUserToFollower(following) {\n      var _loop = function _loop(i) {\n        if (following[i].hasOwnProperty('user')) {\n          return \"continue\";\n        }\n\n        var user = props.users.find(function (x) {\n          return x.uid === following[i].follower;\n        });\n\n        if (user == undefined) {\n          props.fetchUsersData(following[i].follower, false);\n        } else {\n          following[i].user = user;\n        }\n      };\n\n      for (var i = 0; i < following.length; i++) {\n        var _ret = _loop(i);\n\n        if (_ret === \"continue\") continue;\n      }\n\n      setFollowing(following);\n    }\n\n    firebase.firestore().collectionGroup(\"userFollowing\").where('id', '==', userId).get().then(function (snapshot) {\n      var following = snapshot.docs.map(function (doc) {\n        var data = doc.data();\n        var id = doc.id;\n        return _objectSpread({\n          id: id\n        }, data);\n      });\n      matchUserToFollower(following);\n    });\n  }, [props.users]);\n\n  var EmptyListMessage = function EmptyListMessage() {\n    return React.createElement(Text, {\n      style: styles.emptyListStyle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }\n    }, \"No followers yet, click 'Follow' on the user's profile to be the first!\");\n  };\n\n  var navigation = useNavigation();\n  return React.createElement(View, {\n    style: styles.textInputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, React.createElement(FlatList, {\n    data: following,\n    ListEmptyComponent: EmptyListMessage,\n    style: styles.feed,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(View, {\n        style: styles.feedItem,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: styles.postLeftContainer,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }\n      }, React.createElement(Image, {\n        style: styles.profilePhotoPostContainer,\n        source: {\n          uri: item.user ? item.user.userImg : 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 29\n        }\n      }), React.createElement(Text, {\n        style: styles.searchResultsText,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 29\n        }\n      }, item.user ? item.user.name : null)));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }));\n}\n\n;\nvar styles = StyleSheet.create({\n  textInputContainer: {\n    flex: 1,\n    backgroundColor: \"#ffffff\"\n  },\n  searchResultsText: {\n    fontSize: 16,\n    padding: 5,\n    alignSelf: 'center',\n    marginLeft: \"5%\"\n  },\n  profilePhotoPostContainer: {\n    backgroundColor: \"#e1e2e6\",\n    width: 50,\n    height: 50,\n    borderRadius: 40\n  },\n  feedItem: {\n    padding: 4,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#e1e2e6\",\n    flexDirection: 'row'\n  },\n  postLeftContainer: {\n    flexDirection: \"row\"\n  },\n  emptyListStyle: {\n    padding: 10,\n    fontSize: 18,\n    textAlign: 'justify',\n    marginHorizontal: \"5%\"\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    users: store.usersState.users,\n    following: store.userState.following,\n    usersFollowingLoaded: store.usersState.usersFollowingLoaded\n  };\n};\n\nvar mapDispatchProps = function mapDispatchProps(dispatch) {\n  return bindActionCreators({\n    fetchUsersData: fetchUsersData\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchProps)(FollowerScreen);","map":{"version":3,"names":["React","useState","useEffect","useNavigation","Analytics","firebase","require","connect","bindActionCreators","fetchUsersData","FollowerScreen","props","following","setFollowing","userId","route","params","logEvent","screen_name","matchUserToFollower","i","hasOwnProperty","user","users","find","x","uid","follower","undefined","length","firestore","collectionGroup","where","get","then","snapshot","docs","map","doc","data","id","EmptyListMessage","styles","emptyListStyle","navigation","textInputContainer","feed","item","feedItem","postLeftContainer","profilePhotoPostContainer","uri","userImg","searchResultsText","name","StyleSheet","create","flex","backgroundColor","fontSize","padding","alignSelf","marginLeft","width","height","borderRadius","borderBottomWidth","borderBottomColor","flexDirection","textAlign","marginHorizontal","mapStateToProps","store","usersState","userState","usersFollowingLoaded","mapDispatchProps","dispatch"],"sources":["C:/Users/pauls/Documents/LoccToccDev/frontend/components/main/FollowerScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { View, Text, TextInput, FlatList, TouchableOpacity, StyleSheet, Image } from 'react-native'\r\n\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nimport * as Analytics from 'expo-firebase-analytics';\r\n\r\nimport firebase from 'firebase'\r\nrequire(\"firebase/firestore\")\r\nrequire(\"firebase/firebase-storage\")\r\n\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport { fetchUsersData } from '../../redux/actions/index'\r\n\r\nfunction FollowerScreen(props) {\r\n    const [following, setFollowing] = useState([])\r\n\r\n    const { userId } = props.route.params;\r\n\r\n    useEffect(() => {\r\n        analytics().logEvent('screen_view', { screen_name: 'FollowerList' })\r\n    }, [])\r\n    \r\n    useEffect(() => {\r\n\r\n        function matchUserToFollower(following) {\r\n            for (let i = 0; i < following.length; i++) {\r\n                if (following[i].hasOwnProperty('user')) {\r\n                    continue;\r\n                }\r\n\r\n                const user = props.users.find(x => x.uid === following[i].follower)\r\n                if (user == undefined) {\r\n                    props.fetchUsersData(following[i].follower, false)\r\n                } else {\r\n                    following[i].user = user\r\n                }\r\n            }\r\n            \r\n            setFollowing(following)\r\n\r\n        }\r\n            firebase.firestore()\r\n            .collectionGroup(\"userFollowing\")\r\n            .where('id', '==', userId)\r\n            .get()\r\n            .then((snapshot) => {\r\n\r\n                  let following = snapshot.docs.map(doc => {\r\n                    const data = doc.data();\r\n                    const id = doc.id;\r\n                    return { id, ...data }\r\n                })\r\n                matchUserToFollower(following)\r\n            })\r\n\r\n\r\n        \r\n        \r\n    }, [props.users])\r\n\r\n    const EmptyListMessage = () => {\r\n        return (\r\n          // Flat List Item\r\n          <Text\r\n            style={styles.emptyListStyle}\r\n            >\r\n            No followers yet, click 'Follow' on the user's profile to be the first!\r\n          </Text>\r\n        );\r\n      };\r\n\r\n    \r\n\r\n    const navigation = useNavigation();\r\n\r\n    return (\r\n        <View style={styles.textInputContainer}>\r\n            <FlatList\r\n                data = {following}\r\n                ListEmptyComponent={EmptyListMessage}\r\n                style={styles.feed}\r\n                renderItem={({ item }) => (\r\n                    <View style={styles.feedItem}>\r\n                        <TouchableOpacity style={styles.postLeftContainer}>\r\n                            <Image \r\n                                style={styles.profilePhotoPostContainer}\r\n                                source={{uri: item.user ? item.user.userImg : 'https://images.app.goo.gl/7nJRbdq4wXyVLFKV7'}}\r\n                            />\r\n                            <Text style={styles.searchResultsText}>{item.user ? item.user.name : null}</Text>\r\n                        </TouchableOpacity>\r\n                        \r\n                    </View>\r\n                    \r\n            )}\r\n            />\r\n        </View>\r\n    )\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    textInputContainer: {\r\n        flex: 1,\r\n        backgroundColor: \"#ffffff\",\r\n\r\n    },\r\n    searchResultsText: {\r\n        fontSize: 16,\r\n        padding: 5,\r\n        alignSelf: 'center',\r\n        marginLeft: \"5%\",\r\n    },\r\n    profilePhotoPostContainer: {\r\n        backgroundColor: \"#e1e2e6\",\r\n        width: 50,\r\n        height: 50,\r\n        borderRadius: 40,\r\n    },\r\n    feedItem:{\r\n        padding:4,\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: \"#e1e2e6\",\r\n        flexDirection: 'row',\r\n    },\r\n    postLeftContainer: {\r\n        flexDirection: \"row\",\r\n    },\r\n    emptyListStyle: {\r\n        padding: 10,\r\n        fontSize: 18,\r\n        textAlign: 'justify',\r\n        marginHorizontal: \"5%\",\r\n      },\r\n   \r\n    \r\n})\r\n\r\nconst mapStateToProps = (store) => ({\r\n    users: store.usersState.users,\r\n    following: store.userState.following,\r\n    usersFollowingLoaded: store.usersState.usersFollowingLoaded,\r\n})\r\nconst mapDispatchProps = (dispatch) => bindActionCreators({ fetchUsersData }, dispatch);\r\n\r\nexport default connect(mapStateToProps,  mapDispatchProps)(FollowerScreen);\r\n\r\n\r\n\r\n"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;;;;;;;AAGA,SAASC,aAAT,QAA8B,0BAA9B;AAEA,OAAO,KAAKC,SAAZ,MAA2B,yBAA3B;AAEA,OAAOC,QAAP,MAAqB,UAArB;;AACAC,OAAO,CAAC,oBAAD,CAAP;;AACAA,OAAO,CAAC,2BAAD,CAAP;;AAEA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,cAAT;;AAEA,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;EAAA;;EAC3B,gBAAkCV,QAAQ,CAAC,EAAD,CAA1C;EAAA;EAAA,IAAOW,SAAP;EAAA,IAAkBC,YAAlB;;EAEA,IAAQC,MAAR,GAAmBH,KAAK,CAACI,KAAN,CAAYC,MAA/B,CAAQF,MAAR;EAEAZ,SAAS,CAAC,YAAM;IACZE,SAAS,CAACa,QAAV,CAAmB,aAAnB,EAAkC;MAAEC,WAAW,EAAE;IAAf,CAAlC;EACH,CAFQ,EAEN,EAFM,CAAT;EAIAhB,SAAS,CAAC,YAAM;IAEZ,SAASiB,mBAAT,CAA6BP,SAA7B,EAAwC;MAAA,2BAC3BQ,CAD2B;QAEhC,IAAIR,SAAS,CAACQ,CAAD,CAAT,CAAaC,cAAb,CAA4B,MAA5B,CAAJ,EAAyC;UACrC;QACH;;QAED,IAAMC,IAAI,GAAGX,KAAK,CAACY,KAAN,CAAYC,IAAZ,CAAiB,UAAAC,CAAC;UAAA,OAAIA,CAAC,CAACC,GAAF,KAAUd,SAAS,CAACQ,CAAD,CAAT,CAAaO,QAA3B;QAAA,CAAlB,CAAb;;QACA,IAAIL,IAAI,IAAIM,SAAZ,EAAuB;UACnBjB,KAAK,CAACF,cAAN,CAAqBG,SAAS,CAACQ,CAAD,CAAT,CAAaO,QAAlC,EAA4C,KAA5C;QACH,CAFD,MAEO;UACHf,SAAS,CAACQ,CAAD,CAAT,CAAaE,IAAb,GAAoBA,IAApB;QACH;MAX+B;;MACpC,KAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,SAAS,CAACiB,MAA9B,EAAsCT,CAAC,EAAvC,EAA2C;QAAA,iBAAlCA,CAAkC;;QAAA,yBAEnC;MASP;;MAEDP,YAAY,CAACD,SAAD,CAAZ;IAEH;;IACGP,QAAQ,CAACyB,SAAT,GACCC,eADD,CACiB,eADjB,EAECC,KAFD,CAEO,IAFP,EAEa,IAFb,EAEmBlB,MAFnB,EAGCmB,GAHD,GAICC,IAJD,CAIM,UAACC,QAAD,EAAc;MAEd,IAAIvB,SAAS,GAAGuB,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,UAAAC,GAAG,EAAI;QACvC,IAAMC,IAAI,GAAGD,GAAG,CAACC,IAAJ,EAAb;QACA,IAAMC,EAAE,GAAGF,GAAG,CAACE,EAAf;QACA;UAASA,EAAE,EAAFA;QAAT,GAAgBD,IAAhB;MACH,CAJiB,CAAhB;MAKFpB,mBAAmB,CAACP,SAAD,CAAnB;IACH,CAZD;EAiBP,CApCQ,EAoCN,CAACD,KAAK,CAACY,KAAP,CApCM,CAAT;;EAsCA,IAAMkB,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;IAC3B,OAEE,oBAAC,IAAD;MACE,KAAK,EAAEC,MAAM,CAACC,cADhB;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,6EAFF;EAQD,CATH;;EAaA,IAAMC,UAAU,GAAGzC,aAAa,EAAhC;EAEA,OACI,oBAAC,IAAD;IAAM,KAAK,EAAEuC,MAAM,CAACG,kBAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACI,oBAAC,QAAD;IACI,IAAI,EAAIjC,SADZ;IAEI,kBAAkB,EAAE6B,gBAFxB;IAGI,KAAK,EAAEC,MAAM,CAACI,IAHlB;IAII,UAAU,EAAE;MAAA,IAAGC,IAAH,QAAGA,IAAH;MAAA,OACR,oBAAC,IAAD;QAAM,KAAK,EAAEL,MAAM,CAACM,QAApB;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GACI,oBAAC,gBAAD;QAAkB,KAAK,EAAEN,MAAM,CAACO,iBAAhC;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GACI,oBAAC,KAAD;QACI,KAAK,EAAEP,MAAM,CAACQ,yBADlB;QAEI,MAAM,EAAE;UAACC,GAAG,EAAEJ,IAAI,CAACzB,IAAL,GAAYyB,IAAI,CAACzB,IAAL,CAAU8B,OAAtB,GAAgC;QAAtC,CAFZ;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADJ,EAKI,oBAAC,IAAD;QAAM,KAAK,EAAEV,MAAM,CAACW,iBAApB;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GAAwCN,IAAI,CAACzB,IAAL,GAAYyB,IAAI,CAACzB,IAAL,CAAUgC,IAAtB,GAA6B,IAArE,CALJ,CADJ,CADQ;IAAA,CAJhB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADJ,CADJ;AAsBH;;AAAA;AAED,IAAMZ,MAAM,GAAGa,UAAU,CAACC,MAAX,CAAkB;EAC7BX,kBAAkB,EAAE;IAChBY,IAAI,EAAE,CADU;IAEhBC,eAAe,EAAE;EAFD,CADS;EAM7BL,iBAAiB,EAAE;IACfM,QAAQ,EAAE,EADK;IAEfC,OAAO,EAAE,CAFM;IAGfC,SAAS,EAAE,QAHI;IAIfC,UAAU,EAAE;EAJG,CANU;EAY7BZ,yBAAyB,EAAE;IACvBQ,eAAe,EAAE,SADM;IAEvBK,KAAK,EAAE,EAFgB;IAGvBC,MAAM,EAAE,EAHe;IAIvBC,YAAY,EAAE;EAJS,CAZE;EAkB7BjB,QAAQ,EAAC;IACLY,OAAO,EAAC,CADH;IAELM,iBAAiB,EAAE,CAFd;IAGLC,iBAAiB,EAAE,SAHd;IAILC,aAAa,EAAE;EAJV,CAlBoB;EAwB7BnB,iBAAiB,EAAE;IACfmB,aAAa,EAAE;EADA,CAxBU;EA2B7BzB,cAAc,EAAE;IACZiB,OAAO,EAAE,EADG;IAEZD,QAAQ,EAAE,EAFE;IAGZU,SAAS,EAAE,SAHC;IAIZC,gBAAgB,EAAE;EAJN;AA3Ba,CAAlB,CAAf;;AAqCA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD;EAAA,OAAY;IAChCjD,KAAK,EAAEiD,KAAK,CAACC,UAAN,CAAiBlD,KADQ;IAEhCX,SAAS,EAAE4D,KAAK,CAACE,SAAN,CAAgB9D,SAFK;IAGhC+D,oBAAoB,EAAEH,KAAK,CAACC,UAAN,CAAiBE;EAHP,CAAZ;AAAA,CAAxB;;AAKA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,QAAD;EAAA,OAAcrE,kBAAkB,CAAC;IAAEC,cAAc,EAAdA;EAAF,CAAD,EAAqBoE,QAArB,CAAhC;AAAA,CAAzB;;AAEA,eAAetE,OAAO,CAACgE,eAAD,EAAmBK,gBAAnB,CAAP,CAA4ClE,cAA5C,CAAf"},"metadata":{},"sourceType":"module"}